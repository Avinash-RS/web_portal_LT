<div class="batch-creation-container">

  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a>Home</a></li>
    </ol>
  </nav>

  <!-- -------------------------------------batch creation header ---------------------------->
  <div class="batch-creation-header">

    <div class="f_wt_400 f_size_23">
      {{isBatchId ? 'Update Batch' : 'Create a Batch' }}
    </div>

    <ng-container *ngIf="isEnable; else editBatch">
      <div class="batch-btn-disable">
        <button mat-flat-button color="primary" (click)="onEditBatch()">Edit</button>
      </div>

    </ng-container>
    <ng-template #editBatch>

      <div class="batch-btn">
        <button mat-flat-button color="primary" (click)="onAddcourse()">Add Course</button>
        <button mat-flat-button color="primary" (click)="onAddLearner()">Add Learner</button>
      </div>
    </ng-template>

  </div>

  <!------------------------------------------- main section  ----------------------------------->
  <div class="main-content-1">

    <div class="batch-name">
      Batch name <span style="color: red;">*</span>
    </div>
    <div>
      <input class="input-box" [(ngModel)]="branchDetails.batchname" type="text" placeholder="Enter the batch name"
        [disabled]=isEnable />
    </div>
    <div class="desc-date-container">

      <div class="desc-container">
        <div class="batch-desc">
          Description
        </div>
        <div>
          <input class="desc-input" [(ngModel)]="branchDetails.batchdescription" type="text"
            placeholder="Enter the short description (max 75 characters)" [disabled]=isEnable />
        </div>

      </div>
      <div class="date-container">

        <mat-form-field class="date-picker">
          <input matInput [matDatepicker]="startPicker" [(ngModel)]="branchDetails.batchstartdate"
            placeholder="Start Date" [disabled]=isEnable>
          <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
          <mat-datepicker #startPicker></mat-datepicker>
        </mat-form-field>


        <mat-form-field class="date-picker">
          <input matInput [matDatepicker]="endPicker" [(ngModel)]="branchDetails.batchenddate" placeholder="End Date"
            [disabled]=isEnable>
          <mat-datepicker-toggle matSuffix [for]="endPicker" [disabled]=isEnable></mat-datepicker-toggle>
          <mat-datepicker #endPicker [disabled]=isEnable></mat-datepicker>
        </mat-form-field>

      </div>
    </div>

    <div class="batch-instruc">
      Add batch Instructor
    </div>
    <div class="instruc-dropdown">

      <mat-form-field>
        <mat-select multiple (selectionChange)="instrucSelection($event)" [disabled]=isEnable>
          <mat-option *ngFor="let inst of instructors" [value]="inst.id">{{inst.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- ----------------------------- -->
  </div>

  <div class="main-content-2">

    <mat-accordion class="example-headers-align">
      <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" (closed)="setStep(4)" class="expansion-panel"
        hideToggle>
        <mat-expansion-panel-header class="mat-heading">
          <mat-panel-title class="mat-heading-title">
            {{'Batch Instructors' + ' (' + branchDetails.instructure_details?.length + ')'}}
            <mat-icon>{{step === 0 ? 'keyboard_arrow_up' : 'keyboard_arrow_down'}}</mat-icon>
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div class="batch-couse-instructors">
          <ng-container *ngFor="let instDetails of branchDetails.instructure_details">
            <mat-card class="instructor-card">
              <img [src]="instDetails.image" alt="no image">
              <div class="instructors-details">
                <div class="inst-name">
                  {{instDetails.name}}
                </div>
                <div style="font-size: 12px;padding-left: 1.5px;">
                  {{instDetails.description}}
                </div>
              </div>
            </mat-card>
          </ng-container>


        </div>


      </mat-expansion-panel>

      <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" (closed)="setStep(4)" class="expansion-panel"
        hideToggle>
        <mat-expansion-panel-header class="mat-heading">
          <mat-panel-title class="mat-heading-title">
            {{'Courses' + ' (' + branchDetails.course_details?.length + ')'}}
            <mat-icon>{{step === 1 ? 'keyboard_arrow_up' : 'keyboard_arrow_down'}}</mat-icon>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="tool-bar">
          <mat-icon class="add-icon" (click)="onAddcourse()">add</mat-icon>
          <!-- <mat-icon class="del-icon">delete</mat-icon> -->
        </div>
        <div class="batch-course-list">
          <ng-container *ngFor="let course of branchDetails.course_details">
            <mat-card class="batch-couse-card">
              <img [src]="course.image" alt="">
              <div>
                {{course.name}}
              </div>
            </mat-card>
          </ng-container>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" (closed)="setStep(4)" class="expansion-panel"
        hideToggle>
        <mat-expansion-panel-header class="mat-heading">
          <mat-panel-title class="mat-heading-title">
            {{'Learners' + ' (' + branchDetails.user_details?.length + ')'}}
            <mat-icon>{{step === 2 ? 'keyboard_arrow_up' : 'keyboard_arrow_down'}}</mat-icon>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="tool-bar">
          <mat-icon class="add-icon" (click)="onAddLearner()">add</mat-icon>
          <!-- <mat-icon class="del-icon">delete</mat-icon> -->
        </div>
        <div class="learner-list">
          <mat-chip-list>
            <ng-container *ngFor="let learners of branchDetails.user_details">
              <mat-chip class="learner-chip">{{learners.name}}</mat-chip>
            </ng-container>
          </mat-chip-list>
        </div>
      </mat-expansion-panel>

    </mat-accordion>

    <div class="create-btn" *ngIf="!isEnable">
      <button mat-flat-button color="primary"
        (click)="isBatchId ? updateBatch() : createBatch()">{{isBatchId ? 'Update Batch' : 'Create a Batch' }}</button>
    </div>

  </div>

</div>