<app-header></app-header>

<br>
<p>
  <span class="redHover">
    <mat-icon class="material-icons f_size_15 backIc pointer" (click)="getBack()">arrow_back_ios
    </mat-icon>
    <span class="f_size_19 pointer" (click)="getBack()">
      Back
    </span>
  </span>
</p>
<div class="f_wt_600 f_size_16 m-l-13 display_flex">
  <span class="pad-t-2">
    {{course?.name}}
  </span>
  <mat-icon class="material-icons brdcrmb f_size_25 pointer" (click)="goBack()">chevron_right
  </mat-icon>
  <span class="pad-t-2">Instructor Led</span>
</div>
<div class="row" *ngIf="listOfSessions?.length > 0">
  <div class="col-lg-7 col-xl-7 col-md-7 col-sm-7 col-12">
    <!-- <span class="headLine">{{course?.name}}</span> -->
  </div>
  <div class="col-lg-5 col-xl-5 col-md-5 col-sm-5 col-12">
    <span class="headLine">Upcoming Sessions and Recorded Sessions</span>
  </div>
</div>

<!-- If no records -->
<div class="row" *ngIf="!listOfSessions?.length">
  <div class="col-lg-4 col-xl-4 col-md-4 col-sm-4 col-12"></div>
  <div class="col-lg-4 col-xl-4 col-md-6 col-sm-4 col-12">
      <mat-card class="noSessionCard color-yellow-card-status">
        <div class="row mar-t-12">
          <div class="col-lg-2 col-xl-2 col-md-2 col-sm-2 col-12">
            <img class="noSessionImg" src="../../../../assets/learner/Instructor-led.svg"> 
          </div>
          <div class="col-lg-10 col-xl-10 col-md-10 col-sm-10 col-12">
            <span class="noData"> You have no sessions at the moment!</span>
          </div>
        </div>
      </mat-card> 
  </div>
  <div class="col-lg-4 col-xl-4 col-md-4 col-sm-4 col-12"></div>  
</div>
<!-- End of no records -->

<div class="row" *ngIf="listOfSessions?.length">
  <!-- Left Side Panel ... -->
  <!-- <div class="col-lg-1 col-xl-1 col-md-1 col-sm-1 col-12"></div> -->
  <div class="col-lg-7 col-xl-7 col-md-7 col-sm-7 col-12">
    <br>
    <div flex>
      <mat-card class="imgLayout">
        <!-- <div *ngIf='!listOfSessions?.length'>
          <span class="sessionTitle"> No Activities Found..</span>
        </div> -->
        <div class="row" *ngIf='activityShow !== undefined'>
          <div class="col-lg-6 col-xl-6 col-md-6 col-sm-6 col-12">
            <div flex style="margin-top: 15px;">
              <img style="height: 229px !important; width: 100% !important;" *ngIf="!activityShow?.activity_details.livethumbnail" height="229" width="369" src="../../../../assets/learner/instructor_image.png" />
              <img style="height: 229px !important; width: 100%" *ngIf="activityShow?.activity_details.livethumbnail" height="229" width="369" [src]="activityShow?.activity_details.livethumbnail" />
            </div>
          </div>
          <div class="col-lg-6 col-xl-6 col-md-6 col-sm-6 col-12">
            
            <div flex style="margin-top: 15px;">
              <span class="sessionTitle">{{activityShow?.activity_details.topicname}}</span>
              <div class="row" style="color: white; margin-top: 10px;">
                <!-- <span>Held On</span> &nbsp;&nbsp; -->
                <span>
                  {{ activityShow?.activity_details.startdate | date: 'MMM d, y, h:mm a'}}</span>
              </div>
              <div class="row" style="color: white; margin-top: 10px;">
                <span class="sessionTitle">Duration</span>
              </div>
              <div class="row" style="color: white; margin-top: 10px;">
                <span class="sessionTitle">{{activityShow?.duration}}</span>
              </div>
              <div class="row" style="margin-top: 20px;">
                <button class="actBtn" mat-raised-button *ngIf="activityShow?.status === 'On going' && activityShow?.activity_details.activitytype != 'Recorded'"
                  (click)="getAction(activityShow.activity_details.link)">{{activityShow?.button}}</button>
              </div>
              <div class="row" style="margin-top: 20px;color: white !important;" *ngIf="activityShow?.activity_details.activitytype == 'Recorded'">
                <button class="actBtn" mat-raised-button 
                  (click)="preview(activityShow.activity_details.link)">{{activityShow?.button}}</button>
              </div>
            </div>

          </div>
        </div>
      </mat-card>
      
      <div class="row" style="margin-top: 5%;">
        <div class="col-lg-4 col-xl-4 col-md-4 col-sm-4 col-12">
          <mat-card class="smallContainer1">
            <mat-card-subtitle class="smallHeadline">Total Sessions</mat-card-subtitle>
            <div class="row d-flex p-t-20">
              <span class="number">{{sessionAttendance?.length}}</span>
              <img mat-card-image src="../../../../assets/learner/elearning.svg">
            </div>
          </mat-card>
        </div>
        
        <div class="col-lg-4 col-xl-4 col-md-4 col-sm-4 col-12">
          <mat-card class="smallContainer2">
            <mat-card-subtitle class="smallHeadline">Attended Sessions</mat-card-subtitle>
            <div class="row d-flex p-t-20">
              <span class="number" *ngIf="attendedSessions !== undefined">{{attendedSessions?.true}}</span>
              <span class="number" *ngIf="attendedSessions.true === undefined" >0</span>
              <img mat-card-image src="../../../../assets/learner/students.svg">
            </div>
          </mat-card>
        </div>

        <div class="col-lg-4 col-xl-4 col-md-4 col-sm-4 col-12">
          <mat-card class="smallContainer3">
            <mat-card-subtitle class="smallHeadline">Recorded Sessions</mat-card-subtitle>
            <div class="row d-flex p-t-20">
              <span class="number">0</span>
              <img mat-card-image src="../../../../assets/learner/video-tutorial.svg">
            </div>              
          </mat-card>
        </div>
      </div>
      <div class="row" style="margin-top: 5%; margin-left: 5px;" *ngIf="sessionAttendance?.length">
        <span class="tableHeadline">My Attendance</span>
      </div>
      <div class="row attendance-table" *ngIf="sessionAttendance?.length">
        <table style="width: 100%;">
          <tr class="tblheaderFont">
            <th>Session #</th>
            <th style="min-width: 400px;">Topic Name</th>
            <th>Date</th>
            <th>Present?</th>
          </tr>
          <tr *ngFor="let atd of sessionAttendance; let i = index" [attr.data-index]="i">
            <td>{{i+1}}</td>
            <td>{{atd.activity.topicname}}</td>
            <td>{{atd.activity.startdate | date: 'dd/MM/yyyy hh:mm a'}}</td>
            <td>
              <mat-icon *ngIf="atd.activity.attendencedetails.Attendence == 'yes' || atd.activity.attendencedetails.Attendence == 'Yes'" style="color: green;">done</mat-icon>
              <mat-icon *ngIf="atd.activity.attendencedetails.Attendence =='no' || atd.activity.attendencedetails.Attendence == 'No'" style="color: red;">close</mat-icon>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>

  <!-- Right Side Panel ...  -->
  <div class="col-lg-5 col-xl-5 col-md-5 col-sm-5 col-12">
    <div class="row course-list">
      <mat-nav-list style="width: 100% !important;margin-top: 18px !important;">
        <mat-list-item *ngFor="let los of listOfSessions" class="row">
          <mat-card class="sessionCard" (click)="useSession(los)">
            <div class="row">
              <div class="image-container col-lg-6 col-xl-6 col-md-6 col-sm-6 col-12">
                <img *ngIf="los.activity_details.livethumbnail" height="220" style="width: 100%; height: 140px;" [src]="los.activity_details.livethumbnail">
                <img *ngIf="!los.activity_details.livethumbnail" height="220" style="width: 100%; height: 140px;" src="../../../../assets/learner/instructor_image.png">
                <div class="bottom-right">{{los.status}}</div>
              </div>
              <div class="col-lg-6 col-xl-6 col-md-6 col-sm-6 col-12">
                <h4 style="margin-left: 20px;font-weight: bold;">{{los.activity_details.topicname}}</h4>
                <h5 style="margin-left: 20px;">
                  {{los.activity_details.startdate | date: 'dd/MM/yyyy hh:mm'}}</h5>
                <h5 style="margin-left: 20px;">Duration: {{los.duration}} </h5>
              </div>
            </div>
          </mat-card>
        </mat-list-item>
      </mat-nav-list>
    </div>
  </div>

</div>