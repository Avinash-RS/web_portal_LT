<app-performance-page-mobile *ngIf="mobileResponsive"></app-performance-page-mobile>
<app-project-mobile *ngIf="projectMobileResponsive"></app-project-mobile>
<app-header *ngIf="!mobileResponsive && !projectMobileResponsive"></app-header>
<div class="con-1" *ngIf="!mobileResponsive && !projectMobileResponsive">
  <!-- <span class="back" routerLink="/Learner/MyCourse" routerLinkActive="active"> < Back</span><br><br> -->
  <span class="redHover">
    <mat-icon class="material-icons f_size_15 backIc pointer" (click)="goToCourse()">arrow_back_ios
    </mat-icon>
    <span class="f_size_19 pointer" (click)="goToCourse()">
      Back
    </span>
  </span>
  <!-- <p class="courseName"><b>{{courseName}}</b></p> -->
  <div class="f_wt_600 f_size_16 m-l-13 display_flex contentTop1">
    <span>
      {{courseName}}
    </span>
    <mat-icon class="material-icons brdcrmb f_size_25 pointer">chevron_right
    </mat-icon>
    <span>Activities</span>
  </div>
  <mat-tab-group animationDuration="1000ms" (selectedTabChange)="tabChanged($event); projectTab($event)">
    <mat-tab label="Assignments">
      <mat-accordion class="example-headers-align" multi *ngIf="assignmentContent?.coursedetails.length > 0">
        <ng-container *ngFor="let res of assignmentContent?.coursedetails; let i = index">
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                <span>{{res?.modulename}}
                </span>
              </mat-panel-title>
              <!-- <mat-panel-description>
              Type your name and age
              <mat-icon>account_circle</mat-icon>
            </mat-panel-description> -->
            </mat-expansion-panel-header>

            <!-- tab  data comes here-->

            <div class="row">
              <div class="col-12">
                <mat-list *ngFor="let mod of res?.moduledetails">
                  <mat-list-item>
                    <div mat-line class="row">
                      <div class="col-12">
                        <span>
                          {{mod?.topicname}} :
                        </span>
                      </div>

                    </div><br>
                    <div class="row assignDetails" *ngFor="let file of mod.resourse?.files">
                      <div class="col-3">
                        <div class="row">
                          <div class="col-12">
                            <span class="singleline-text"><b>{{'Assignment name' | translate }}</b></span>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <img *ngIf="file.doc_type == 'application/pdf'" class="size" alt=""
                              src="assets/learner/fileicon/PDF_Icon.svg">
                            <img *ngIf="file.doc_type == 'link'" class="size" alt=""
                              src="assets/learner/fileicon/Link_Icon.svg">
                            <img
                              *ngIf="file.doc_type == 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'"
                              class="size" alt="" src="assets/learner/fileicon/Excel_Icon.svg">
                            <img *ngIf="file.doc_type == 'image/jpeg' || file.doc_type == 'image/png' " class="size"
                              alt="" src="assets/learner/fileicon/Image_Icon.svg">
                            <img
                              *ngIf="file.doc_type == 'application/vnd.openxmlformats-officedocument.presentationml.presentation'"
                              class="size" alt="" src="assets/learner/fileicon/PPT_Icon.svg">
                            <img
                              *ngIf="file.doc_type == 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'"
                              class="size" alt="" src="assets/learner/fileicon/Word_Icon.svg">
                            <img *ngIf="file.doc_type == 'application/msword'" class="size" alt=""
                              src="assets/learner/fileicon/Word_Icon.svg">
                            <img *ngIf="file.doc_type == 'application/vnd.ms-excel'" class="size" alt=""
                              src="assets/learner/fileicon/Excel_Icon.svg">
                            <mat-icon class="docType no-cursor" *ngIf="file.doc_type == 'text/plain' ">
                              description </mat-icon>&nbsp;
                            <span class="assignmentName" tooltip="{{file.type_name}}"
                              placement="bottom">{{file.type_name}}</span>
                          </div>
                          <div class="col-12 f_size_12" *ngIf="file?.type_name =='Link'">
                            <span class="ml-2">
                              NA
                            </span>

                          </div>
                          <div class="col-12 f_size_12" *ngIf="file?.size">
                            {{file.size}}
                          </div>

                        </div>
                      </div>
                      <div class="col-1">
                        <div class="row">
                          <div class="col-12">
                            <span><b>{{'Question' | translate }}</b></span>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <span class="ml-3">
                              <mat-icon *ngIf="file.enableView" (click)="previewDoc(previewDialog,file)"
                                class="viewDoc">find_in_page
                              </mat-icon>
                              <mat-icon *ngIf="!file.enableView" class="viewDoc">find_in_page
                              </mat-icon>
                            </span>
                          </div>
                        </div>
                      </div>
                      <div class="col-2">
                        <div class="row">
                          <div class="col-12">
                            <span><b>{{'Start date' | translate }}</b></span>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <span class="singleline-text">
                              {{file.startDate  | date :'MMM d, y h:mm a'
                              }}
                            </span>
                          </div>
                        </div>
                      </div>
                      <div class="col-2">
                        <div class="row">
                          <div class="col-12">
                            <span><b>{{'End date' | translate }}</b></span>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <span class="singleline-text">
                              {{file.endDate  | date :'MMM d, y h:mm a'
                              }}
                            </span>
                          </div>
                        </div>
                      </div>
                      <div class="col-1">
                        <div class="row">
                          <div class="col-12">
                            <span>
                              <b>{{'Upload' | translate }}</b>
                            </span>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <span class="uploadIcon" *ngIf="file?.enableUpload">
                              <i (click)="fileInput.click()" class="fa fa-upload searchicon ml-3 tooltip-350 pointer"
                                [tooltip]="popTemplate" placement="bottom" aria-hidden="true"></i>
                            </span>

                            <span class="uploadIcon" *ngIf="!file?.enableUpload">
                              <i class="fa fa-upload ml-3 tooltip-350 pointer gradedUpload" aria-hidden="true"></i>
                            </span>
                            <input class="form-control border-right-0" type='file' id="upload-photo" #fileInput
                              (change)="uploadAssignmentsFile($event,file._id,res?.modulename,mod?.topicname,file.type_name,file?.score,file?.endDate,file?.path)">
                          </div>
                        </div>
                      </div>
                      <div class="col-1">
                        <div class="row">
                          <div class="col-12">
                            <span class="singleline-text"><b>
                                {{'Max score' | translate }}</b></span>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <span class="ml-3">
                              {{file?.score}}
                            </span>
                          </div>
                        </div>
                      </div>
                      <div class="col-1">
                        <div class="row">
                          <div class="col-12">
                            <span class="singleline-text">
                              <b>
                                {{'Obtained score' | translate }}
                              </b>
                            </span>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <span class="ml-5">
                              {{file?.score_mark}}
                            </span>
                          </div>
                        </div>
                      </div>
                      <div class="col-1 subStatus">
                        <div class="row">
                          <div class="col-12">
                            <span><b>{{'Status' | translate }}</b></span>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <div class="disply no-cursor"
                              *ngIf="file.doc_status === false && file.grade_status === 'Not Evaluated'">
                              <div class="icon">
                                {{'Submitted' | translate }}
                              </div>
                            </div>
                            <div class="disply no-cursor" *ngIf="file.doc_status && file.grade_status != 'Evaluated'">
                              <div class="not-submited">
                                {{'Yet to Submit' | translate }}
                              </div>
                            </div>
                            <div class="disply no-cursor" *ngIf="file.grade_status === 'Evaluated'">
                              <div class="grade" style="padding-top: 4px;color: green;">
                                {{'Graded' | translate }}</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </mat-list-item>
                </mat-list>
              </div>
            </div>
          </mat-expansion-panel>
        </ng-container>
      </mat-accordion>
      <div class="row ml-0 mr-0 errmsg" *ngIf="assignmentContent?.coursedetails.length < 1">
        <div class="col-12 m-auto text-center">
          <span class="errormsg">
            <img class="assignImg" alt="" src="assets/006-assignment1.svg">
            <span>You have no assignments at the moment!</span>
          </span>
        </div>
      </div>

    </mat-tab>

    <mat-tab label="Perform">
      <ng-container *ngIf="performDetails?.length > 0">
        <div class="box-0-1" *ngFor="let perform of performDetails; let i = index">
          <div class="row">
            <div class="col-10">
              <div class="f_size_16 f_wt_600">{{i+1}}. {{perform.performActivity.module_id}}</div>
              <div class="t-l">{{perform.performActivity.topic_id}}</div>
              <div class="t-l">Activity description : {{perform.performActivity.activityname}}</div>
            </div>
            <div class="col-2">
              <span class="f_wt_600 statusTxt" *ngIf="perform.performActivity.submit_status == 'notsubmitted'"><span
                  class="dot"></span>
                <!-- 'notsubmitted' -->
                Yet to submit</span>

              <span class="f_wt_600 submitstatus" *ngIf=" perform.performActivity.submit_status == 'submitted'"> <span
                  class="submitdot"></span>
                Submitted</span>

              <span class="f_wt_600 gradeStatus" *ngIf="perform.performActivity.submit_status == 'graded'"> <span
                  class="gradedot"></span>
                Graded</span>
              <mat-icon class="f_size_16 arr" aria-hidden="false" *ngIf="!isperformColaps || performId !== i"
                (click)="isperformColaps = !isperformColaps; performId = i">keyboard_arrow_down</mat-icon>
              <mat-icon class="f_size_16 arr" aria-hidden="false" *ngIf="isperformColaps && performId === i"
                (click)="isperformColaps = !isperformColaps; performId = i">keyboard_arrow_up
              </mat-icon>
              <br>
              <div
                [ngClass]="perform.performActivity.submittedTotal > 0 ? 'mt-2 mb-2 itrationTxts' : 'mt-2 mb-2 itrationTxt'"
                class="">Iterations : <span
                  *ngIf="perform.performActivity.submittedTotal > 0">{{perform.performActivity.submittedTotal}} /
                </span>{{perform.performActivity.iterationTotal}}</div>
              <div class="m-l-68">Start date :<span class="endDateTxt"></span>End date :</div>
              <div class="m-l-68 f_wt_600">{{perform.activityStartDate}}
                <span class="EndDate f_wt_600"></span>{{perform.activityEndDate}}</div>
            </div>
          </div>

          <div class="panel" *ngIf="isperformColaps && performId === i">
            <hr>
            <div class="row">
              <div class="col-8">
                <div class="f_size_16 f_wt_600 mb-3">Material for activity</div>
                <!-- <div class="row" *ngFor="let material of perform.performActivity.materialDetails">
                <div class="col-4 m-t">
                  <img alt="Course Img" src="../../../../assets/images/play.jpg" class="courseImg" />
                  <div class="con">
                  <div class="uppertext">{{material.name}}</div>
                  <div class="overlay">
                   <span class="margin-5">Duration : 01:20:00</span> 
                  <div class="row ">
                    <div class="col-5 dis-line pointer">
                      <mat-icon  class="f_size_16" aria-hidden="false">play_circle_outline</mat-icon>Play
                    </div>
                    <div class="col-7 dis-line pointer">
                      <mat-icon class="f_size_16" aria-hidden="false">get_app</mat-icon>Download
                    </div>
                  </div>
                </div>
              </div>
                </div>
              </div> -->
                <owl-carousel-o [options]="trendingCategorires"
                  [ngClass]="perform.performActivity.materialDetails.length <= 4 ? 'widthClass arrow' : 'arrow'">
                  <ng-template class="row ml-0 mr-0" carouselSlide
                    *ngFor="let material of perform.performActivity.materialDetails; let i = index">
                    <div class="col-4 w-100 pt-2 pb-2 carouselCol">
                      <mat-card class="p-0 carouselCard" (mouseover)="hover = true; mouseover(i)"
                        (mouseleave)="hover = false">
                        <!--  -->
                        <div class="row ml-0 mr-0 carouselRow1">
                          <div class="col-12 m-auto">
                            <mat-icon class="imageIcon"
                              *ngIf="material.doc_type =='image/jpeg'  || material.doc_type == 'image/png' || material.doc_type == 'image/jpg'">
                              photo_size_select_actual</mat-icon>
                            <mat-icon class="imageIcon" *ngIf="material.doc_type =='video/mp4'">play_circle_outline
                            </mat-icon>
                            <i class="fa fa-file-pdf-o pdfIcon" *ngIf="material.doc_type =='application/pdf'"
                              aria-hidden="true"></i>
                          </div>
                        </div>
                        <div (mouseleave)="hover = false"
                          [ngClass]="!hover ? 'row ml-0 mr-0 carouselRow' : 'row ml-0 mr-0 carouselRowHover'">
                          <div class="col-12 text-center m-auto pl-0 pr-0">
                            <span class="carouselText">{{material.filename}}</span>
                            <br>
                            <div class="row ml-0 mr-0" *ngIf="hover">
                              <div class="col-12 pl-0 pr-0">
                                <div class="row ml-0 mr-0">
                                  <div class="col-12 text-left pl-1">
                                    <p class="carouselText">Duration:</p>
                                  </div>
                                </div>
                                <div class="row ml-0 mr-0 playActions">
                                  <div class="col-5 text-left pr-0 colAction"
                                    (click)="playVideo(projectPreviewDialog, videoDialog, material, material.doc_type)">
                                    <mat-icon class="position-absolute text-white playBtn"
                                      *ngIf="material.doc_type =='video/mp4'">play_circle_outline</mat-icon>
                                    <mat-icon class="position-absolute text-white playBtn"
                                      *ngIf="material.doc_type =='image/jpeg'">photo_size_select_actual</mat-icon>
                                      <i class="fa fa-file-pdf-o position-absolute text-white playBtn" *ngIf="material.doc_type =='application/pdf'"
                                      aria-hidden="true"></i>
                                    <span class="text-white actionBtn"
                                      *ngIf="material.doc_type =='video/mp4'">Play</span>
                                    <span class="text-white actionBtn"
                                      *ngIf="material.doc_type == 'image/jpeg' || material.doc_type == 'application/pdf'">Preview</span>
                                  </div>
                                  <div class="col-7 text-center pr-0 colAction">
                                    <!-- (click)="downloadVideo()" -->
                                    <a [href]="material.path" [download]="material.filename"><i
                                        class="fa fa-download text-white position-absolute downloadBtn"
                                        aria-hidden="true"></i>
                                      <span class="text-white actionBtn1">Download</span></a>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </mat-card>
                    </div>
                  </ng-template>
                </owl-carousel-o>
                <h3
                  *ngIf="perform.performActivity.materialDetails && perform.performActivity.materialDetails.length == 0">
                  No perform yet
                </h3>
              </div>

              <div class="col-4">

                <div class="f_size_16 f_wt_600 align-center margin-b-9">Your work</div>
                <mat-accordion *ngFor="let itrdata of perform.performActivity.iterationDetails">
                  <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                    <mat-expansion-panel-header>
                      <mat-panel-title class="mr-0">
                        Iteration {{itrdata.iterationcount}}
                      </mat-panel-title>
                      <mat-panel-description>
                        <div class="row ml-0 mr-0 w-100">
                          <div class="col-6 pl-0 text-center w-100">
                            <span>Score: {{itrdata.score_mark}} / {{itrdata.total_mark}}</span>
                          </div>
                          <div class="col-6 pr-0 pl-0 text-right w-100">
                            <span class="f_wt_600" *ngIf="itrdata.submit_status == 'notsubmitted' && itrdata.grade_status !== 'Evaluated'"> <span
                                class="dot"></span>Yet to submit</span>
                            <span class="f_wt_600 iterSubmit"
                              *ngIf="itrdata.grade_status == 'Not Evaluated' && itrdata.submitAction == 'submit'"> <span
                                class="submitdot"></span>
                              Submitted</span>
                            <span class="f_wt_600 iterGrade" *ngIf="itrdata.grade_status == 'Evaluated'"> <span
                                class="gradedot"></span>
                              Graded <span
                                *ngIf="itrdata.grade_status == 'Evaluated' && itrdata.instructor_status !== null"
                                [ngClass]="itrdata.instructor_status == 'pass'?'colorGreen ml-1': 'colorRed ml-1'">{{itrdata.instructor_status | titlecase}}</span></span>
                          </div>
                        </div>


                      </mat-panel-description>
                    </mat-expansion-panel-header>
                    <div class="align-center" *ngIf="itrdata.grade_status !== 'Evaluated'">
                      <div class="videoPreview ml-auto mr-auto mb-3" *ngFor="let videoName of itrdata.videodetails">
                        <mat-icon class="videoPlay float-left">play_circle_outline</mat-icon>
                        <span>{{(videoName.name| slice:0:18)+'...'}}</span>
                        <mat-icon class="deleteBtn float-right" *ngIf="itrdata.submit_status == 'notsubmitted'"
                          (click)="submitDeleteVideo(videoName, itrdata, perform.performActivity , submitType = 'delete')">
                          delete</mat-icon>
                      </div>
                      <input type="file" accept="video/mp4" multiple style="display: none" #videoInput
                        [(ngModel)]="fileName" (change)="uploadDocument($event)" />
                      <button mat-stroked-button [disabled]="itrdata.submit_status !== 'notsubmitted' || !perform.itrationStarted" class="upload-bltn mt-3"
                        (click)="uploadDocuments($event, itrdata, perform, submitType = 'upload')">
                        <mat-icon class="icon-color m-t-m-2">add</mat-icon>
                        Upload video
                      </button>
                      <br>
                      <button mat-stroked-button class="submit-btn mt-2"
                        *ngIf="itrdata.submit_status == 'notsubmitted' && itrdata.videodetails.length > 0"
                        (click)="submitType = 'submit'; submitDeleteVideo({}, itrdata, perform.performActivity)">
                        Submit
                      </button>
                      <button mat-stroked-button
                      *ngIf="itrdata.submit_status == 'notsubmitted' &&  itrdata.videodetails.length == 0 || !perform.itrationStarted"
                      class="submitted-btn mt-2"> Submit </button>
                      <button mat-stroked-button *ngIf="itrdata.submitAction == 'submit'" class="submitted-btn mt-2">
                        Submitted </button>
                    
                    </div>
                    <div class="align-center mt-2" *ngIf="itrdata.grade_status !== 'Evaluated'">
                      <span *ngIf="itrdata.videodetails.length > 0  && itrdata.submitAction !== 'submit'"
                        class="submitedFile">Submitted files cannot be edited</span>
                      <span class="uploadedFile" *ngIf="itrdata.submitAction == 'submit'">Submitted on :
                        {{itrdata.submitted_on | date:'MMM dd, yyyy'}}</span>
                    </div>
                    <div class="align-center mt-2" *ngIf="itrdata.grade_status === 'Evaluated'">
                      <owl-carousel-o [options]="trendingCategorires"
                      [ngClass]="perform.performActivity.materialDetails.length <= 3 ? 'owlItration arrow' : 'arrow'">
                      <ng-template class="row ml-0 mr-0" carouselSlide
                      *ngFor="let videoName of itrdata.videodetails; let i = index">
                        <mat-card class="materialCard p-0 mr-2" (mouseover)="hoverfile = true; mouseover(i)" 
                        (mouseleave)="hoverfile = false">
                        <!-- (click)="playVideo(projectPreviewDialog, videoDialog, videoName, videoName.doc_type)" -->
                          <div class="row ml-0 mr-0 matCardIconRow1">
                            <div class="col-12 pl-0 pr-0">
                              <i class="fa fa-file-pdf-o icons" *ngIf="videoName.doc_type == 'file/pdf' || videoName.doc_type == 'application/pdf'" aria-hidden="true"></i>
                              <mat-icon class="icons" *ngIf="videoName.doc_type == 'image/png' || videoName.doc_type == 'image/jpg' || videoName.doc_type == 'image/jpeg'">photo_size_select_actual</mat-icon>
                              <mat-icon class="icons" *ngIf="videoName.doc_type =='video/mp4'">play_circle_outline</mat-icon> 
                            </div>
                          </div>
                          <div class="row ml-0 mr-0 h-40" (mouseleave)="hoverfile = false" [ngClass]="!hoverfile ? 'row ml-0 mr-0 fileSelDet' : 'row ml-0 mr-0 fileSelDetHover'">
                            <div class="col-12 pr-0 fileNameCol">
                              <span class="fileColor">{{(videoName.name| slice:0:18)+'...'}}</span>
                          <div class="row ml-0 mr-0" *ngIf="hoverfile">
                              <div class="col-12 pl-0 pr-0">
                                <div class="row ml-0 mr-0 playActions">
                                  <div class="col-5 text-left pr-0 colAction"
                                    (click)="playVideo(projectPreviewDialog, videoDialog, videoName, videoName.doc_type)">
                                    <mat-icon class="position-absolute text-white playBtnmobile"
                                      *ngIf="videoName.doc_type =='video/mp4'">play_circle_outline</mat-icon>
                                    <mat-icon class="position-absolute text-white playBtn"
                                      *ngIf="videoName.doc_type =='image/jpeg'">photo_size_select_actual</mat-icon>
                                      <i class="fa fa-file-pdf-o position-absolute text-white playBtn" *ngIf="videoName.doc_type =='application/pdf'"
                                      aria-hidden="true"></i>
                                    <span class="text-white actionBtnmobile"
                                      *ngIf="videoName.doc_type =='video/mp4'">Play</span>
                                    <span class="text-white actionBtn"
                                      *ngIf="videoName.doc_type == 'image/jpeg' || videoName.doc_type == 'application/pdf'">Preview</span>
                                  </div>
                                  <div class="col-7 text-center pr-0 colActionDownload">
                                    <a [href]="videoName.path" [download]="videoName.name"><i
                                        class="fa fa-download text-white position-absolute downloadBtnMobile"
                                        aria-hidden="true"></i>
                                      <span class="text-white actionBtn1Mobile">Download</span></a>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        </mat-card>
                        </ng-template>
                        </owl-carousel-o>
                      <div class="row ml-0 mr-0 mt-2">
                        <div class="col-12 text-left">
                          <p class="feedBackTxt">Feedback</p>
                          <textarea disabled rows="4" cols="50" class="textArea">
                            {{itrdata.comments}}
                            </textarea>
                        </div>
                      </div>
                      <div class="row ml-0 mr-0">
                        <div class="col-12">
                          <button mat-stroked-button (click)="openDocument(projectPreviewDialog, itrdata.assessmentreport[0], itrdata.assessmentreport[0].doc_type)" class="AssignmentBtn mt-3 w-100"><mat-icon class="assignmentIcon mr-2">wysiwyg</mat-icon>Assessment report</button>
                        </div>
                      </div>
                    </div>
                    <!-- Oct 12, 2020 -->
                  </mat-expansion-panel>
                </mat-accordion><br>
              </div>
            </div>

          </div>
        </div>
      </ng-container>
      <div class="row ml-0 mr-0 errmsg" *ngIf="performDetails?.length < 1">
        <div class="col-12 m-auto text-center">
          <span class="errormsg">
            <img class="assignImg" alt="" src="assets/book.svg">
            <span>You have no perform activity at the moment!</span>
          </span>
        </div>
      </div>
    </mat-tab>

    <mat-tab label="Project">
      <ng-container *ngIf="projectDetails?.length > 0">
        <div class="box-0-1" *ngFor="let project of projectDetails; let i = index">
          <div class="row">
            <div class="col text-right">
              <mat-icon class="f_size_16 expansionarr" aria-hidden="false" *ngIf="!isCollapsed || projectId !== i"
                (click)="isCollapsed = !isCollapsed; projectId = i">keyboard_arrow_down</mat-icon>
              <mat-icon class="f_size_16 expansionarr" aria-hidden="false" *ngIf="isCollapsed && projectId === i"
                (click)="isCollapsed = !isCollapsed; projectId = i">keyboard_arrow_up</mat-icon>
            </div>
          </div>
          <div class="row">
            <div [ngClass]="project.projectActivity.showLearnerList ? 'col-xl-10 col-lg-10 col-md-10 col-sm-12 col-12' : 'col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12'">
              <!-----------------------------Row 1--------------------->
              <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                  <span class="topic text-left">
                    <mat-icon class="assignIcon">assignment</mat-icon>
                    <span class="f_size_16 f_wt_600 projHead">{{project.projectActivity.topic_id}}</span>
                  </span>
                  <!---------------------------Team------------------>
                  <span class="float-right group">
                    <button mat-mini-fab class="groupBtn">
                      <mat-icon class="grpIcon">group</mat-icon>
                    </button>
                    <span class="teamName" *ngIf="project.projectActivity.groupname.length < 14">
                      {{project.projectActivity.groupname}} ({{project.projectActivity.groupDetails.length}})
                    </span>
                    <span class="teamName" *ngIf="project.projectActivity.groupname.length > 14"
                      matTooltip="{{project.projectActivity.groupname}}" matTooltipClass="custom-mat-tooltip">
                      {{(project.projectActivity.groupname| slice:0:14)+'...'}}
                    </span>&nbsp;
                    <button mat-mini-fab class="arrBtn" *ngIf="!project.projectActivity.showLearnerList"
                      (click)="project.projectActivity.showLearnerList = !project.projectActivity.showLearnerList">
                      <mat-icon class="arrBack">arrow_back</mat-icon>
                    </button>
                  </span>
                </div>
              </div>
              <!-----------------------------Status------------------------->
              <div class="row">
                <div class="col-xl-10 col-lg-10 col-md-10 col-sm-12 col-12"></div>
                <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12 col-12 text-right">
                  <span class="f_wt_600 status" *ngIf="project.projectActivity.submitAction !== 'submit' ||
              project.projectActivity.submit_status == 'notsubmitted'"> <span class="dot"></span>
                    Yet to submit</span>

                  <span class="f_wt_600 projectSubmitstatus submitted" *ngIf="project.projectActivity.submitAction == 'submit'
              && project.projectActivity.grade_status == 'Not Evaluated'"> <span class="submitdot"></span>
                    Submitted</span>

                  <span class="f_wt_600 grade" *ngIf="project.projectActivity.grade_status == 'Evaluated'"> <span class="gradedot"></span>
                    Graded</span>
                </div>
              </div>
              <div class="row" *ngIf="project.projectActivity.grade_status == 'Evaluated'">
                <div class="col text-right">
                  <p class="totscore">Total score:
                    {{project.projectActivity.score_mark}}/{{project.projectActivity.total_mark}}</p>
                </div>
              </div>

              <div class="row">
                <div class="col-xl-9 col-lg-9 col-md-9 col-sm-12 col-12">
                  <div class="t-l-1">Activity Description: {{project.projectActivity.activityname}}</div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-12 col-12 text-right">
                  <div class="m-r-40">Start date :<span class="margin-30"></span>End date :</div>
                  <div class="m-r-2 f_wt_600">{{project.activityStartDate}}
                    <span class="margin-21 f_wt_600"></span>{{project.activityEndDate}}</div>
                </div>
              </div>
              <!-----------------------------Materials for activity--------------------->
              <div class="panel1" *ngIf="isCollapsed && projectId === i">
                <hr>
                <div class="row">
                  <div class="col-xl-8 col-lg-8 col-md-8 col-sm-12 col-12 second">
                    <div class="f_size_16 f_wt_600">Material for activity</div>

                    <owl-carousel-o [options]="trendingCategorires"
                      [ngClass]="project.projectActivity.materialDetails.length <= 4 ? 'widthClass arrow' : 'arrow'">
                      <ng-template class="row ml-0 mr-0" carouselSlide
                        *ngFor="let material of project.projectActivity.materialDetails; let i = index">
                        <div class="col-4 w-100 pt-2 pb-2 carouselCol">
                          <mat-card class="p-0 carouselCard" (mouseover)="hover = true; mouseover(i)">
                            <!--  -->
                            <div class="row ml-0 mr-0 carouselRow1">
                              <div class="col-12 m-auto">
                                <mat-icon class="imageIcon" *ngIf="material.doc_type =='image/jpeg'
                           || material.doc_type == 'image/png' || material.doc_type == 'image/jpg'">
                                  photo_size_select_actual</mat-icon>
                                <mat-icon class="imageIcon" *ngIf="material.doc_type =='video/mp4'">play_circle_outline
                                </mat-icon>
                                <i class="fa fa-file-pdf-o pdfIcon" *ngIf="material.doc_type =='application/pdf'"
                                  aria-hidden="true"></i>
                              </div>
                            </div>
                            <div (mouseleave)="hover = false"
                              [ngClass]="!hover ? 'row ml-0 mr-0 carouselRow' : 'row ml-0 mr-0 carouselRowHover'">
                              <div class="col-12 text-center m-auto pl-0 pr-0">
                                <span class="carouselText" *ngIf="material.filename.length < 28">
                                  {{material.filename}}
                                </span>
                                <span class="carouselText" *ngIf="material.filename.length > 28"
                                  matTooltip="{{material.filename}}" matTooltipClass="custom-mat-tooltip">
                                  {{(material.filename| slice:0:28)+'...'}}
                                </span>
                                <br>
                                <div class="row ml-0 mr-0" *ngIf="hover">
                                  <div class="col-12 pl-0 pr-0">
                                    <div class="row ml-0 mr-0">
                                      <div class="col-12 text-left">
                                        <p class="carouselText">Duration:</p>
                                      </div>
                                    </div>
                                    <div class="row ml-0 mr-0 playActions">
                                      <div class="col-5 text-left pr-0 colAction"
                                        (click)="projectPreviewDoc(projectPreviewDialog, videoDialog, material, 'material')">
                                        <mat-icon class="position-absolute text-white playBtn"
                                          *ngIf="material.doc_type == 'video/mp4'">play_circle_outline</mat-icon>
                                        <mat-icon class="position-absolute text-white playBtn" *ngIf="material.doc_type =='image/jpeg'
                                    || material.doc_type == 'image/png' || material.doc_type == 'image/jpg'
                                    || material.doc_type == 'application/pdf'">pageview</mat-icon>
                                        <span *ngIf="material.doc_type == 'video/mp4'"
                                          class="text-white actionBtn">Play</span>
                                        <span *ngIf="material.doc_type == 'image/png' || material.doc_type == 'image/jpeg'
                                    || material.doc_type == 'image/jpg' || material.doc_type == 'application/pdf'" class="text-white actionBtn">Preview</span>
                                      </div>
                                      <div class="col-7 text-center pr-0 colAction"
                                        (click)="downloadDoc(material, 'material')">
                                        <i class="fa fa-download text-white position-absolute downloadBtn"
                                          aria-hidden="true"></i>
                                        <span class="text-white actionBtn1">Download</span>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </mat-card>
                        </div>
                      </ng-template>
                    </owl-carousel-o>

                    <!-- <h3 *ngIf="project.projectActivity.materialDetails && project.projectActivity.materialDetails.length == 0">
                      No project yet
                  </h3> -->
                  </div>
                  <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 col-12 third" *ngIf="project.projectActivity.submit_status == 'notsubmitted'
              || project.projectActivity.grade_status !== 'Evaluated'">
                    <div class="f_size_16 f_wt_600 align-center work">Your work</div>
                    <div [ngClass]="project.projectActivity.showLearnerList ? 'box-0-3' : 'box-0-2'">
                      <div class="fileData ml-auto mr-auto mb-3"
                        *ngFor="let item of project.projectActivity.videodetails">
                        <mat-icon *ngIf="item.doc_type == 'video/mp4'" class="videoPlay float-left">play_circle_outline
                        </mat-icon>
                        <mat-icon
                          *ngIf="item.doc_type == 'image/jpeg'|| item.doc_type == 'image/png' || item.doc_type =='image/jpg'"
                          class="videoPlay float-left">photo</mat-icon>
                        <mat-icon *ngIf="item.doc_type == 'application/pdf'" class="videoPlay float-left">picture_as_pdf
                        </mat-icon>
                        <span class="uploadfileName" *ngIf="item.name.length < 28">
                            {{item.name}}
                          </span>
                        <span class="uploadfileName" *ngIf="item.name.length > 28" matTooltip="{{item.name}}"
                        matTooltipClass="custom-mat-tooltip">
                          {{(item.name| slice:0:28)+'...'}}
                        </span>
                        <mat-icon class="deleteIcon float-right"
                          *ngIf="project.projectActivity.submitAction !== 'submit'"
                          (click)="learnerSumbitdeleteVideo(project, item, 'delete')">delete</mat-icon>
                      </div>
                      <div class="align-center">

                        <input type="file" style="display: none"
                          accept="video/mp4,image/png,image/jpeg,image/jpg,application/pdf" #uploadInput
                          [(ngModel)]="fileName" (change)="uploadDoc($event, project, 'upload')" />
                        <button mat-stroked-button class="upload-btn" (click)="uploadDocs()"
                          [disabled]="project.enableSubmit == false && project.submitType == false"
                          *ngIf="project.projectActivity.submitAction !== 'submit'">
                          <mat-icon class="icon-color m-t-m-2">add</mat-icon>
                          Add your files
                        </button>

                        <button mat-stroked-button [disabled]="project.enableSubmit == false  && project.submitType == false" class="submit-btn"
                          (click)="learnerSumbitdeleteVideo(project, '' ,'submit')"
                          *ngIf="project.projectActivity.submit_status == 'notsubmitted' && project.projectActivity.videodetails.length > 0">
                          Submit
                        </button>
                        <button mat-stroked-button [disabled]="project.enableSubmit == false  && project.submitType == false"
                          *ngIf="project.projectActivity.videodetails.length == 0" class="submit-btn"> Submit </button>
                        <button mat-stroked-button class="submitted-btn" [disabled]="true"
                          *ngIf="project.projectActivity.submitAction == 'submit'">
                          Submitted
                        </button><br><br>
                        <p *ngIf="project.projectActivity.submit_status == 'notsubmitted'">Submitted files cannot be
                          edited</p>
                        <p *ngIf="project.projectActivity.submitAction == 'submit'">Submitted on:
                          {{project.submittedOn}}</p>
                      </div>
                    </div>
                  </div>
                </div>

              </div><br>

              <!-------------------------------------Your files--------------------------------------->
              <div class="panel1" *ngIf="isCollapsed && projectId === i && project.projectActivity.grade_status == 'Evaluated'">
                <div class="row">
                  <div class="col-xl-8 col-lg-8 col-md-8 col-sm-12 col-12">
                    <div class="f_size_16 f_wt_600">Your submissions</div>

                    <owl-carousel-o [options]="trendingCategorires"
                      [ngClass]=" project.projectActivity.videodetails.length <= 4 ? 'widthClass arrow' : 'arrow'">
                      <ng-template class="row ml-0 mr-0" carouselSlide
                        *ngFor="let video of project.projectActivity.videodetails; let i = index">
                        <div class="col-4 w-100 pt-2 pb-2 carouselCol">
                          <mat-card class="p-0 carouselCard" (mouseover)="hover = true; mouseover(i)">
                            <!--  -->
                            <div class="row ml-0 mr-0 carouselRow1">
                              <div class="col-12 m-auto">
                                <mat-icon class="imageIcon" *ngIf="video.doc_type =='image/jpeg'
                         || video.doc_type == 'image/png' || video.doc_type == 'image/jpg'">photo_size_select_actual
                                </mat-icon>
                                <mat-icon class="imageIcon" *ngIf="video.doc_type =='video/mp4'">play_circle_outline
                                </mat-icon>
                                <i class="fa fa-file-pdf-o pdfIcon" *ngIf="video.doc_type =='application/pdf'"
                                  aria-hidden="true"></i>
                              </div>
                            </div>
                            <div (mouseleave)="hover = false"
                              [ngClass]="!hover ? 'row ml-0 mr-0 carouselRow' : 'row ml-0 mr-0 carouselRowHover'">
                              <div class="col-12 text-center m-auto pl-0 pr-0">
                                <span class="carouselText" *ngIf="video.name.length < 28">
                                  {{video.name}}
                                </span>
                                <span class="carouselText" *ngIf="video.name.length > 28"
                                  matTooltip="{{video.name}}" matTooltipClass="custom-mat-tooltip">
                                  {{(video.name| slice:0:28)+'...'}}
                                </span>
                                <br>
                                <div class="row ml-0 mr-0" *ngIf="hover">
                                  <div class="col-12 pl-0 pr-0">
                                    <div class="row ml-0 mr-0">
                                      <div class="col-12 text-left">
                                        <p class="carouselText">Duration:</p>
                                      </div>
                                    </div>
                                    <div class="row ml-0 mr-0 playActions">
                                      <div class="col-5 text-left pr-0 colAction"
                                        (click)="projectPreviewDoc(projectPreviewDialog,videoDialog, video, 'files')">
                                        <mat-icon class="position-absolute text-white playBtn"
                                          *ngIf="video.doc_type == 'video/mp4'">play_circle_outline</mat-icon>
                                        <mat-icon class="position-absolute text-white playBtn"
                                          *ngIf="video.doc_type =='image/jpeg'
                                  || video.doc_type == 'image/png' || video.doc_type == 'image/jpg'|| video.doc_type == 'application/pdf'">pageview</mat-icon>
                                        <span *ngIf="video.doc_type == 'video/mp4'"
                                          class="text-white actionBtn">Play</span>
                                        <span *ngIf="video.doc_type == 'image/png' || video.doc_type == 'image/jpeg'
                                  || video.doc_type == 'image/jpg' || video.doc_type == 'application/pdf'"
                                          class="text-white actionBtn">Preview</span>
                                      </div>
                                      <div class="col-7 text-center pr-0 colAction"
                                        (click)="downloadDoc(video, 'files')">
                                        <i class="fa fa-download text-white position-absolute downloadBtn"
                                          aria-hidden="true"></i>
                                        <span class="text-white actionBtn1">Download</span>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </mat-card>
                        </div>
                      </ng-template>
                    </owl-carousel-o>

                  </div>
                </div>
              </div>
            </div>

            <!------------------------------------Learner list------------------------------->
            <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12 col-12 learnerList first" *ngIf="project.projectActivity.showLearnerList">
              <div class="align-center">

                <span *ngIf="project.projectActivity.groupname.length < 14">
                  {{project.projectActivity.groupname}} ({{project.projectActivity.groupDetails.length}})
                </span>
                <span *ngIf="project.projectActivity.groupname.length > 14"
                  matTooltip="{{project.projectActivity.groupname}}" matTooltipClass="custom-mat-tooltip">
                  {{(project.projectActivity.groupname| slice:0:14)+'...'}}
                </span>
                <button mat-mini-fab class="arrfwd" *ngIf="project.projectActivity.showLearnerList"
                  (click)="project.projectActivity.showLearnerList = !project.projectActivity.showLearnerList">
                  <mat-icon class="arrBack">arrow_forward</mat-icon>
                </button>
              </div>
              <div class="list">
                <ul class="list-group" *ngFor="let learner of project.projectActivity.groupDetails">
                  <li class="list-group-item">{{learner.name}}</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <div class="row ml-0 mr-0 errmsg" *ngIf="projectDetails?.length < 1">
        <div class="col-12 m-auto text-center">
          <span class="errormsg">
            <img class="assignImg" alt="" src="assets/002-project-management.svg">
            <span>You have no project activity at the moment!</span>
          </span>
        </div>
      </div>
    </mat-tab>

  </mat-tab-group>
</div>
<!-------------------Preview for Project------------------>

<ng-template #projectPreviewDialog>
  <div>
    <button mat-mini-fab class="closeBtn">
      <mat-icon class="download-icon" (click)="closedialogbox()">close</mat-icon>
    </button>
  </div>
  <div *ngIf="previewDoc">
    <app-pdfreader [url]="previewDoc"></app-pdfreader>
  </div>
</ng-template>
<!-- dialogue box for assignment tab view assignment-->
<ng-template #previewDialog>
  <div class="row">
    <div class="col-12">
      <button mat-mini-fab class="download-button">
        <mat-icon class="download-icon" (click)="downloadPdf(docpath)">get_app</mat-icon>
      </button>
      <button mat-mini-fab class="close-button">
        <mat-icon class="download-icon" (click)="closedialogbox()">close</mat-icon>
      </button>
    </div>
  </div>
  <div class="row" *ngIf="docpath">
    <div class="col-12">
      <app-pdfreader [url]="docpath"></app-pdfreader>
    </div>
  </div>
</ng-template>

<!---------------------- video play --------------------------------->
<ng-template #videoDialog>
  <div class="row">
    <div class="col-12">
      <button mat-mini-fab class="close-buttonVideo">
        <mat-icon class="download-icon" (click)="closedialogbox()">close</mat-icon>
      </button>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <app-video-player [url]="videoSource"></app-video-player>
    </div>
  </div>
</ng-template>

<!-- tooltip template for assignmnet tab -->
<ng-template #popTemplate class="tooltip-container">
  <span class="singleline-text">
    <span>
      {{'File size : 10mb, Format : jpg, png, jpeg, pdf' | translate }}
    </span>

  </span>
</ng-template>
