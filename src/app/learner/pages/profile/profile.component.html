<app-header></app-header>
<nav aria-label="breadcrumb" class="coursebreadcrumb">
  <ol class="breadcrumb contentTop1">
    <li class="breadcrumb-item"><a [routerLink]="['/Learner/home']">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Profile</li>
  </ol>
</nav>

<div class="profile">

  <div class="bg-img">
    <span (click)="cannotEdit = !cannotEdit;" class="editText">
      <mat-icon matTooltip="Click here to change profile details" class="editIcon">create
      </mat-icon> Edit &nbsp;
    </span>

    <div class="row" style="margin-top: 7%;">

      <div class="col-xl-4 col-lg-4 col-md-5 col-sm-12 col-12" style="margin-top: 9%;">
        <div class="row" *ngIf="userData">
          <div class="col-md-1"></div>
          <div class="col-md-8 col-sm-10 col-10 bb">
            <span class="color_blue f_size_13 f_wt_500 ">Password : ********</span>
          </div>
          <div class="col-md-1 col-sm-2 col-2" *ngIf="editpopup && !cannotEdit">
            <mat-icon class="f_size_17 bb" style="width: 17px;" matTooltip="Click here to change Password"
              (click)="editPassword(passwordDialog)">create</mat-icon>
          </div>
        </div>

        <div class="row m-t-25px">
          <div class="col-md-1"></div>
          <div class="col-md-8 col-sm-10 col-10 bb">
            <span class="color_blue f_size_13 f_wt_500">Mobile : {{userData.user_mobile || 'XXXXXXXXXX'}}</span>
          </div>
          <div class="col-md-1 col-sm-2 col-2" *ngIf="editpopup && !cannotEdit">
            <mat-icon class="f_size_17 bb" style="width: 17px;" matTooltip="Click here to change Mobile number"
              (click)="editmobno(mobDialog)">
              create</mat-icon>
          </div>
        </div>

        <div class="row m-t-25px m-b-10" *ngIf="userData.email">
          <div class="col-md-1"></div>
          <div class="col-md-8 col-sm-10 col-10 bb">
            <span class="color_blue f_size_13 f_wt_500">Email : {{userData.email}}</span>
          </div>
          <div class="col-md-1 col-sm-2 col-2 " *ngIf="editpopup && !cannotEdit">
            <mat-icon class="f_size_17 bb" style="width: 17px;" matTooltip="Click here to change Email Id"
              (click)="editEmail(emailDialog)">
              create</mat-icon>
          </div>
        </div>

        <div class="row" style="margin-top: 12%;">
          <span class="percentText color_blue">Profile Progress</span><span
            class="percent color_blue">{{profileForm.value.progress || '10'}}%</span>
          <mat-progress-bar mode="determinate" [value]="profileForm.value.progress || 10">
          </mat-progress-bar>
        </div>

      </div>

      <div class="col-xl-4 col-lg-4 col-md-5 col-sm-12 col-12 center">
        <img [src]="profileForm.value.profile_img ? profileForm.value.profile_img : 'assets/learner/profile-img2.png'"
          id="imageUpload" accept=".png, .jpg, .jpeg" #fileInput alt="Avatar" width="230px" style="margin : auto;display : block;
          height: 220px; border: 8px solid #fff;">
        <input style="display: none;" id="fileInput" type='file' #fileInput (change)="onSelectFile($event)">
        <mat-icon *ngIf="!cannotEdit" class="camIcon" for="fileInput" (click)="fileInput.click()">camera_alt
        </mat-icon>

        <div class="uname">{{userData?.full_name || 'Full Name'}} </div>

        <div class="width_100 center_align stateDet">
          {{userData.state_detail && userData.state_detail[0].statename || 'Sate'}},
          {{userData.country_detail && userData.country_detail[0].countryname || 'Country' }}
        </div>

        <div class="f_wt_400 uID">

          <span class="f_size_16"> {{userData.user_dtl && userData.user_dtl.username || 'User Name'}} &nbsp;&nbsp;|
            &nbsp;&nbsp; </span>

          <span class="f_size_16">{{userData.user_profile && (userData.user_profile[0].gender =='M' ? 'Male' : userData.user_profile[0].gender =='F' ? 'Female' : 
            userData.user_profile[0].gender =='O' ? 'Rather Not Say' : 'Gender') }}
            &nbsp;&nbsp;| &nbsp;&nbsp;
          </span>

          <span
            class="f_size_16">{{userData.user_profile && (userData.user_profile[0].is_student_or_professional =='student' ? 
            'Student' : userData.user_profile[0].is_student_or_professional =='professional' ? 'Professional' : 'Role')}}
            &nbsp;&nbsp;| &nbsp;&nbsp;
          </span>

          <span class="f_size_16" *ngFor="let l of userData?.language_detail;let i = index">
            {{l.languagename && i != 0 ? ', ' + l.languagename : l.languagename || null}} </span>
        </div>

        <div class="width_100 center_align m-b-10 color_blue f_wt_500 f_size_16 m-t-5px">
          Member Since
          {{userData.user_dtl && userData.user_dtl.created_on | date}}
        </div>

      </div>

      <div class="col-xl-4 col-lg-4 col-md-2 col-sm-12 col-12">
        <!-- <div class="row" style="margin-top: 40%;">
          <span class="percentText color_blue">Profile Progress</span><span
            class="percent color_blue">{{profileForm.value.progress || '10'}}%</span>
          <mat-progress-bar mode="determinate" [value]="profileForm.value.progress || 10">
          </mat-progress-bar>
        </div> -->
      </div>
    </div>
  </div>


  <div class="container-reg200" style="margin-top: 22%;">
    <div class="wrap-reg">
      <form [formGroup]="profileForm">

        <!-- ////// Info about you//////// -->
        <div class="row">
          <div class="form-group width_100">
            <label class="f_size_19">About Me</label>
            <textarea rows="5" [ngClass]="cannotEdit ? 'dis inputs  color_label  width_100' :
                'inputs  color_label  width_100'"
              [ngClass]="{ 'is-invalid': f.about_you.touched && f.about_you.errors }" placeholder="1000 characters"
              formControlName="about_you" name="about_you"></textarea>
            <div *ngIf="f.about_you.touched && f.about_you.errors" class="invalid-feedback">
              <div *ngIf="f.about_you.errors.minlength">Information about you must be minimum of
                {{f.about_you.errors.minlength.requiredLength}} characters </div>
              <div *ngIf="f.about_you.errors.maxlength">Information about you must be
                {{f.about_you.errors.maxlength.requiredLength}} maximum of characters</div>
            </div>
          </div>
        </div>

        <br>
        <hr class="p-b-10px">
        <br *ngIf="!cannotEdit">

        <!-- //////Gender part//////// -->
        <div class="row" *ngIf="!cannotEdit">
          <div class="col-md-4 col-lg-4 col-sm-12 col-12">
            <label class="p-b-10px f_size_19">Gender</label><span class="mand p-b-10px"> *</span>
            <div class="form-group">
              <mat-radio-group [disabled]='cannotEdit' formControlName="gender" name="gender">
                <mat-radio-button value="M">Male</mat-radio-button>
                <mat-radio-button value="F">Female</mat-radio-button>
                <mat-radio-button value="O">Rather not say</mat-radio-button>
              </mat-radio-group>
            </div>
          </div>

          <!-- //////I'm a//////// -->
          <div class="col-md-4 col-lg-4 col-sm-12 col-12">
            <label class="p-b-10px f_size_19">I Am a</label><span class="mand p-b-10px"> *</span>
            <div class="form-group ">
              <mat-radio-group [disabled]='cannotEdit' formControlName="is_student_or_professional"
                name="is_student_or_professional">
                <mat-radio-button value="student">Student</mat-radio-button>
                <mat-radio-button value="professional">Professional</mat-radio-button>
              </mat-radio-group>
            </div>
          </div>

          <!-- //////Language known//////// -->
          <div class="col-md-4 col-lg-4 col-sm-12 col-12 ">
            <div class="form-group p-b-10px">
              <label class="f_size_19">Languages known</label><br>
              <mat-select [disabled]='cannotEdit' multiple
                [ngClass]="cannotEdit ? 'n dis inputs m-t-5px col-md-6 col-sm-12 col-12' : 'inputs m-t-5px col-md-6 col-sm-12 col-12'"
                placeholder="Language" formControlName="languages_known" name="language">
                <mat-option *ngFor="let item of languageList" [value]="item._id">
                  {{item.languagename}}
                </mat-option>
              </mat-select>
              <!-- <ng-container *ngIf="lang">
                  <input type="text" class="inputs col-md-6 col-sm-12 col-12"
                 [ngClass]="cannotEdit ? 'dis inputs  color_blue  width_80' :
                'inputs  color_blue  width_80'"
                 formControlName="languages_known">
                </ng-container> -->
            </div>
          </div>
        </div>

        <br *ngIf="!cannotEdit">
        <hr *ngIf="!cannotEdit" class="p-b-10px">
        <br *ngIf="!cannotEdit">

        <!-- //////Location//////// -->
        <label class="p-b-10px" *ngIf="!cannotEdit" class="f_size_19">Location</label>
        <span *ngIf="!cannotEdit" class="mand"> *</span><br>
        <div class="row p-b-10px" *ngIf="!cannotEdit">
          <div class="col-md-2 col-lg-2 col-sm-12 col-12">
            <mat-select [disabled]='cannotEdit' [ngClass]="cannotEdit ? 'n dis inputs' : 'inputs'" placeholder="Country"
              formControlName="country" name="country" (selectionChange)="getAllState()">
              <mat-option [value]="country._id" *ngFor="let country of countryValue">
                {{country.countryname}}
              </mat-option>
            </mat-select>
          </div>
          <div class="col-md-2 col-lg-2 col-sm-12 col-12">
            <mat-select [disabled]='cannotEdit' [ngClass]="cannotEdit ? 'n dis inputs' : 'inputs'" placeholder="State"
              formControlName="state" name="state" (selectionChange)="getDistrict()">
              <mat-option [value]="state._id" *ngFor="let state of stateValue">
                {{state.statename}}
              </mat-option>
            </mat-select>
          </div>
          <div class="col-md-2 col-lg-2 col-sm-12 col-12">
            <mat-select [disabled]='cannotEdit' [ngClass]="cannotEdit ? 'n dis inputs' : 'inputs'"
              placeholder="District" formControlName="city_town" name="City">
              <mat-option [value]="city._id" *ngFor="let city of cityValue">
                {{city.districtname}}
              </mat-option>
            </mat-select>
          </div>
        </div>

        <br *ngIf="!cannotEdit">
        <hr *ngIf="!cannotEdit" class="p-b-10px">
        <br *ngIf="!cannotEdit" class="f_size_19">

        <!-- ////////////Qualification row////////////// -->
        <label class="f_size_19 p-b-10px">Qualification</label><span class="mand"> *</span><br>
        <div formArrayName="qualification" *ngFor="let qual of qualification.controls; let in=index">
          <div class="row p-b-10px" [formGroupName]="in">
            <div class="col-md-3 col-sm-12 col-12 display_flex">
              <mat-select [disabled]='cannotEdit' [ngClass]="cannotEdit ? 'n dis inputs' : 'inputs'" placeholder="Level"
                formControlName="qualification" name="qualification" (selectionChange)="changed($event.value,in)">
                <mat-option [value]="lv._id" *ngFor="let lv of levelValue" [disabled]="lv.allowed=='N'"
                  (click)="checkSpec(qual,in,profileForm.qualification,lv)">
                  {{lv.level_name}}
                </mat-option>
              </mat-select>
              <mat-select [disabled]='cannotEdit' [ngClass]="cannotEdit ? 'n dis inputs' : 'inputs'"
                placeholder="Board/University" formControlName="board_university" name="board_university">
                <mat-option [value]="board._id" *ngFor="let board of boardValue, let univ of uniValue">
                  {{board.Board_Name}}
                  {{univ.University_Name}}
                </mat-option>
              </mat-select>
            </div>

            <div class="col-md-3 col-sm-12 col-12 display_flex">
              <!-- <mat-form-field *ngIf=""> -->
              <ng-container
                *ngIf="(qual?.value?.qualification !== '5e7dedc1dba4466d9704b3f2') && (qual?.value?.qualification !== '5e7deddfdba4466d9704b44a')">
                <mat-select [disabled]='cannotEdit' [ngClass]="cannotEdit ? 'n dis inputs' : 'inputs'"
                  placeholder="Institute" formControlName="institute" name="institute">
                  <mat-option [value]="item._id" *ngFor="let item of institutes">
                    {{item.institute_name}}
                  </mat-option>
                </mat-select>
              </ng-container>
              <!------------------------Institute textbox for 10th and 12th--------------------->
              <ng-container class="col-md-3 col-sm-12 col-12 display_flex"
                *ngIf="(qual?.value?.qualification == '5e7dedc1dba4466d9704b3f2') || (qual?.value?.qualification == '5e7deddfdba4466d9704b44a')">
                <input type="text" class="institute" placeholder="Institute" [ngClass]="cannotEdit ? 'dis inputs  color_label  width_80' :
                'inputs  color_blue  width_80'" formControlName="institute">
              </ng-container>
              <mat-select [disabled]='cannotEdit' [ngClass]="cannotEdit ? 'n dis inputs' : 'inputs'"
                placeholder="Discipline" formControlName="discipline" name="discipline">
                <mat-option [value]="item._id" *ngFor="let item of disciplines">
                  {{item.discipline_name}}
                </mat-option>
              </mat-select>
            </div>

            <div class="col-md-3 col-sm-12 col-12 display_flex">
              <ng-container
                *ngIf="(qual?.value?.qualification !== '5e7dedc1dba4466d9704b3f2') && (qual?.value?.qualification !== '5e7deddfdba4466d9704b44a')">
                <mat-select [disabled]='cannotEdit' [ngClass]="cannotEdit ? 'n dis inputs' : 'inputs'"
                  placeholder="Specification" formControlName="specification" name="specification">
                  <mat-option [value]="item._id" *ngFor="let item of specValue">
                    {{item.specification_name}}
                  </mat-option>
                </mat-select>
              </ng-container>
              <ng-container>
                <input class="institute" type="tel" mask="0000" [ngClass]="cannotEdit ? 'dis inputs  color_label  width_80' :
                'inputs  color_blue  width_80'" placeholder="Year of Passing" formControlName="year_of_passing"
                  (change)="yearOfpassing(in)">
              </ng-container>
            </div>

            <div class="col-md-3 col-sm-12 col-12 display_flex">
              <input type="tel" suffix="%" [ngClass]="cannotEdit ? 'dis inputs  width_50 color_label  m-l-10px' :
                'inputs  width_50 color_blue  m-l-10px'" placeholder="Percentage" formControlName="percentage"
                maxlength="5" (blur)="formatPercentage(in)">
              <mat-icon (click)="addQualification()"
                *ngIf="!cannotEdit && in == profileForm.value.qualification.length -1 && profileForm.value.qualification.length < 15"
                class="p-5px cG">add
              </mat-icon>
              <mat-icon *ngIf="!cannotEdit && profileForm.value.qualification.length > 1"
                (click)="removeQualification(in)" class="p-5px dIcon cG" [disabled]='cannotEdit'>delete_outline
              </mat-icon>
            </div>
          </div>

        </div>

        <br>
        <hr class="p-b-10px">
        <br>

        <!-- ////////////Certificate row////////////// -->
        <label class="p-b-10px" class="f_size_19">Certificate</label><br>
        <div formArrayName="certificate" class="row p-b-10px"
          *ngFor="let certificate of certificate.controls; let i=index">
          <div class="col-md-2 col-sm-4 col-8 display_flex">

            <input type="text"
              [ngClass]="cannotEdit ? 'dis inputs  color_label  width_80': 'inputs  color_blue  width_80 ena'"
              placeholder="Certificate Link" formControlName="{{i}}">
            <mat-icon (click)="addCertificates(certificate.value,i)" *ngIf="!cannotEdit && i == profileForm.value.certificate.length -1 && 
              profileForm.value.certificate.length < 15" class="p-5px cG">add
            </mat-icon>
            <mat-icon *ngIf="!cannotEdit && profileForm.value.certificate.length > 1" (click)="removeCertificates(i)"
              class="p-5px dIcon cG">delete_outline</mat-icon>
          </div>
        </div>

        <br>
        <hr>
        <br class="p-b-10px">

        <label class="p-b-10px" class="f_size_19">Social Media</label><br>
        <!-- ////////////Social Link row////////////// -->
        <div formArrayName="social_media" class="row p-b-10px"
          *ngFor="let social of social_media.controls; let ind=index">
          <div [ngClass]="cannotEdit ? 'col-md-2 col-sm-4 col-8 display_flex' :
            'col-md-2 col-sm-4 col-8 display_flex'" [formGroupName]="ind">
            <i class="fa fa-linkedin linkedin " aria-hidden="true"></i>
            <input type="text" *ngIf="profileForm.value.link != '' && !cannotEdit" [ngClass]="cannotEdit ? 'inputs color_blue width_80 dis' :
            'inputs color_blue width_80'" placeholder="Social Media Link" formControlName="link">
            <!-- {{profileForm.value.link}} -->
            <!-- <mat-icon (click)="addMediaLink()" class="p-5px" [disabled]='cannotEdit'>add_circle_outline
              </mat-icon>
              <mat-icon (click)="removeMediaLink(ind)" class="p-5px" [disabled]='cannotEdit'>delete</mat-icon> -->
          </div>
        </div>

        <!-- /////If professional////// -->
        <br>
        <hr *ngIf="profileForm.value.is_student_or_professional == 'professional'">
        <br>

        <div *ngIf="profileForm.value.is_student_or_professional == 'professional'">
          <label class="f_size_19 p-b-10px">Experience</label><span class="mand"> *</span>
          <div class="row p-b-10px" formGroupName="professional">
            <div class="col-md-2 col-sm-4 col-8">
              <!-- {{f.professional.controls.total_experience.touched}},
                {{f.professional.controls.total_experience.errors.required}} -->
              <input type="text" [ngClass]="cannotEdit ? 'dis inputs  color_blue  width_80' :
                'inputs  color_blue  width_80'"
                [ngClass]="{ 'is-invalid': f.professional.controls.total_experience.touched && f.professional.controls.total_experience.errors }"
                placeholder="Total Experience" formControlName="total_experience">
              <div class="mand" *ngIf="f.professional.controls.total_experience.touched && 
                  f.professional.controls.total_experience.value > 70">Total Experience should not be greater than 70
              </div>
              <div class="mand"
                *ngIf="f.professional.controls.total_experience.touched && f.professional.controls.total_experience.errors">
                <div *ngIf="f.professional.controls.total_experience.errors.required">Total experience is required
                </div>
                <div *ngIf="f.professional.controls.total_experience.errors.pattern">Total experience must be less
                  than 70</div>
              </div>
            </div>
            <div class="col-md-2 col-sm-4 col-8">
              <input type="text" [ngClass]="cannotEdit ? 'dis inputs  color_blue  width_80' :
                'inputs  color_blue  width_80'"
                [ngClass]="{ 'is-invalid': f.professional.controls.organization.touched && f.professional.controls.organization.errors }"
                placeholder="Organization" formControlName="organization">
              <div *ngIf="f.professional.controls.organization.touched && f.professional.controls.organization.errors"
                class="mand">
                <div *ngIf="f.professional.controls.organization.errors.required">Organization is required
                </div>
                <div *ngIf="f.professional.controls.organization.errors.pattern">Organization is invalid
                </div>
                <div *ngIf="f.professional.controls.organization.errors.minlength">Organization must be minimum of
                  {{f.professional.controls.organization.errors.minlength.requiredLength}} characters
                </div>
              </div>
            </div>
            <div class="col-md-2 col-sm-4 col-8">
              <input type="text" [ngClass]="cannotEdit ? 'dis inputs  color_blue  width_80' :
                'inputs  color_blue  width_80'" placeholder="Job role" formControlName="job_role"
                [ngClass]="{ 'is-invalid': f.professional.controls.job_role.touched && f.professional.controls.job_role.errors }">
              <div *ngIf="f.professional.controls.job_role.touched && f.professional.controls.job_role.errors"
                class="mand">
                <div *ngIf="f.professional.controls.job_role.errors.required">Job Role is required
                </div>
                <div *ngIf="f.professional.controls.job_role.errors.pattern">Job role is invalid
                </div>
                <div *ngIf="f.professional.controls.job_role.errors.minlength">Job Role must be minimum of
                  {{f.professional.controls.job_role.errors.minlength.requiredLength}} characters
                </div>
              </div>
            </div>
          </div>
        </div>
        <br>
        <!-- //.Button -Submit -->
        <div class="row" *ngIf="!cannotEdit">
          <button mat-flat-button class="submit f_size_17 color_white f_wt_400" [disabled]="profileForm.invalid"
            (click)="updateProfile()">Save</button>
        </div>
      </form>
      <!------------------------------Change Email Dialog---------------------->
      <ng-template #emailDialog>
        <span class="f_size_18 color_blue float_right">
          <i class="fa fa-times" aria-hidden="true" (click)="closedialogbox()"></i>
        </span>
        <h2 class="bb" style="padding-bottom: 12px;">Change Email Id</h2>
        <mat-dialog-content style="width: 600px;margin-top: 24px; height: 150px;">
          <form [formGroup]="mailForm">
            <div class="form-group" classs="center center_align">
              <br>
              <label class="f_size_19 f_wt_400 color_black" style="font-size: 17px;">Enter new email id</label>
              <input type="text" formControlName="mailid" placeholder="example@mail.com" class="form-control width_50"
                style="margin-left : 15px" [ngClass]="{ 'is-invalid': c.mailid.touched && c.mailid.errors }" required>
              <div *ngIf="c.mailid.touched && c.mailid.errors" class="invalid-feedback">
                <div *ngIf="c.mailid.errors.required">Email is required</div>
                <div *ngIf="c.mailid.errors.pattern">Email Id is invalid</div>
              </div>
            </div><br><br>
            <button class="popupbtns" [disabled]="!mailForm.valid" (click)="updateEmail(mailForm.valid)">
              Submit
            </button>
          </form>
        </mat-dialog-content>
        <mat-dialog-actions class="center_align">
          <div class="account" *ngIf="resendLabel">Don't receive link?<button class="no_border f_wt_500  color_blue"
              (click)="updateEmail(mailForm.valid)">Resend
              link</button></div>
        </mat-dialog-actions>
      </ng-template>
      <!------------------------------Change mobileno Dialog---------------------->
      <ng-template #mobDialog>
        <span class="f_size_18 color_blue float_right">
          <i class="fa fa-times" aria-hidden="true" (click)="closedialogbox()"></i>
        </span>
        <h2 style="border-bottom: 1px solid #ccc;padding-bottom: 12px;">Change Mobile Number</h2>
        <mat-dialog-content style="width: 600px;margin-top: 24px;height: 150px;">
          <form [formGroup]="otpForm">
            <div class="form-group" class="center center_align">
              <label class="f_size_17 f_wt_400 color_black">Enter New Mobile no</label>
              <input type="text" formControlName="mobile" placeholder="+91" maxlength="10" pattern="[1-9]{1}[0-9]{9}"
                mask="0000000000" class="form-control width_50" style="margin-left : 15px"
                [ngClass]="{ 'is-invalid': c.mobile.touched && c.mobile.errors}" required />
              <div *ngIf="c.mobile.errors" class="invalid-feedback">
                <div *ngIf="c.mobile.errors.required">Mobile Number is required</div>
                <div *ngIf="c.mobile.errors.pattern">Mobile Number is invalid</div>
                <div *ngIf="c.mobile.errors.minlength || c.mobile.errors.maxlength">Mobile Number must be 10 digits
                </div>
              </div>
            </div>
            <p class="f_wt_400 color_black float_left" style="margin-top: 30px;
            margin-left: 9%;
            border-top: 1px solid #ccc;
            padding-top: 15px;
            width: 82%;">Note : OTP will be sent to this number</p>
            <div *ngIf="showotp"><br>
              <p class="f_wt_500 color_blue float_left">OTP Code</p>
              <div class="otp">
                <ng-otp-input [config]="config" formControlName="otp" (onInputChange)="onOtpChange($event)" mask="0">
                </ng-otp-input>
              </div><br>
              <div>
                <p>{{minutes}}:{{seconds}}</p>
              </div>
              <br><br>
            </div>
            <div *ngIf="showotp">
              <button class="popupbtns" [disabled]="verifybutton" (click)="otpverify()">Verify</button>
            </div><br>
            <div *ngIf="showotp" class="account color_blue center_align pointer">Didn't get OTP?<button
                class="no_border f_wt_500  color_blue" (click)="Resendcode()">Resend
                OTP</button></div>
          </form>
        </mat-dialog-content>
        <mat-dialog-actions *ngIf="isenable">
          <button class="popupbtns" [disabled]="!otpForm.valid" (click)="otpverification()">
            Verify
          </button><br><br>
        </mat-dialog-actions>
      </ng-template>
      <!---------------------------------Password Dialog--------------------------------->
      <ng-template #passwordDialog>
        <span class="f_size_18 color_blue float_right">
          <i class="fa fa-times" aria-hidden="true" (click)="closedialogbox()"></i>
        </span>
        <h2 style="border-bottom: 1px solid #ccc;padding-bottom: 12px;">Change Password</h2>
        <mat-dialog-content style="width: 800px;margin-top: 24px;">
          <form [formGroup]="passwordForm">

            <div class="row">

              <div class="col-4">
                <label class="f_size_14 f_wt_400 color_black">Enter the current password</label>
                <div class="form-group">
                  <input [type]="show ? 'text' : 'password'" name="password" formControlName="currentpassword"
                    onCopy="return false" onDrag="return false" onDrop="return false" onPaste="return false"
                    class="form-control"
                    [ngClass]="{ 'is-invalid': c.currentpassword.touched && c.currentpassword.errors }" />
                  <i [class]="show ? 'fa fa-eye errspan' : 'fa fa-eye-slash errspan'" (click)="show = !show"
                    aria-hidden="true"></i>
                  <div *ngIf="c.currentpassword.touched && c.currentpassword.errors" class="invalid-feedback">
                    <div *ngIf="c.currentpassword.errors.required">Current Password is required</div>
                    <!-- <div *ngIf="c.currentpassword.errors.minlength">Current Password must be at least 8 characters</div>
                    <div *ngIf="c.currentpassword.errors.pattern">Your password must contain at least one number and
                      have a
                      mixture of Special characters, uppercase and lowercase letters.</div> -->
                  </div>
                </div>
              </div>

              <div class="col-4">
                <label class="f_size_14 f_wt_400 color_black">Enter the new password</label>
                <div class="form-group">
                  <input [type]="showNew ? 'text' : 'password'" name="password" formControlName="newpassword"
                    onCopy="return false" onDrag="return false" onDrop="return false" onPaste="return false"
                    class="form-control "
                    [ngClass]="{ 'is-invalid': c.newpassword.touched && c.newpassword.errors }"
                    (keyup)="change($event)" />
                  <i [class]="showNew ? 'fa fa-eye errspan' : 'fa fa-eye-slash errspan'" (click)="showNew = !showNew"
                    aria-hidden="true"></i>
                  <div *ngIf="c.newpassword.touched && c.newpassword.errors" class="invalid-feedback">
                    <div *ngIf="c.newpassword.errors.required">New Password is required</div>
                    <!-- <div *ngIf="c.newpassword.errors.minlength">New Password must be at least 8 characters</div>
                    <div *ngIf="c.newpassword.errors.pattern">Your password must contain at least one number and have a
                      mixture of Special characters, uppercase and lowercase letters.</div>
                    <div *ngIf="c.newpassword.errors.mustMatch"> Passwords must be same</div> -->
                  </div>
                </div>

              </div>

              <div class="col-4 ">
                <label class="f_size_14 f_wt_400 color_black">Confirm the new password</label>
                <div class="form-group">
                  <input [type]="showConNew ? 'text' : 'password'" name="password" formControlName="confirmpassword"
                    onCopy="return false" onDrag="return false" onDrop="return false" onPaste="return false"
                    class="form-control"
                    [ngClass]="{ 'is-invalid': c.confirmpassword.touched && c.confirmpassword.errors }" />
                  <i [class]="showConNew ? 'fa fa-eye errspan' : 'fa fa-eye-slash errspan'"
                    (click)="showConNew = !showConNew" aria-hidden="true"></i>
                  <div *ngIf="c.confirmpassword.touched && c.confirmpassword.errors" class="invalid-feedback">
                    <div *ngIf="c.confirmpassword.errors.mustMatch">Should be same as password</div>
                  </div>
                </div>
              </div>

            </div>

            <br>

            <civ class="row">
              <p style="margin-left: 12px; font-size: 13px; ">
                <span>Note : &nbsp; </span>
                <span style=" padding-bottom: 7px;
                border-bottom: 1px solid #ccc;">8 Characters | 1 Uppercase | 1 Lowercase | 1 Number | 1 Special
                  character</span>
              </p>
              <p style="margin-left : 60px;   font-size: 13px;margin-top: -3px;">
                <span>The new password should not be last password</span>
              </p>
            </civ>

            <br>

            <div class="row">
              <div class="box width_100" id="message">
                <div class="row center center_align">
                  <!-- <div class="col"> -->
                  <span *ngIf="uppercase" id="uppercase" class="valid color-border" >
                    <i class="fa fa-check" aria-hidden="true" ></i>
                    &nbsp; &nbsp;Uppercase | &nbsp;&nbsp;</span>
                  <span *ngIf="lowercase" id="lowercase" class="valid color-border" >
                    <i class="fa fa-check" aria-hidden="true"></i>
                    &nbsp; &nbsp; Lowercase | &nbsp; &nbsp;</span>
                  <span  *ngIf="spicalcharacter" id="specialcharacter" class="valid color-border">
                    <i class="fa fa-check" aria-hidden="true"></i> &nbsp; &nbsp;Special
                    character | &nbsp; &nbsp;</span>
                  <span  *ngIf="number" id="number" class="valid color-border">
                    <i class="fa fa-check" aria-hidden="true"></i> &nbsp; &nbsp;Number | &nbsp; &nbsp;
                  </span>
                  <span  *ngIf="passwordForm.value.newpassword?.length >= 8" id="charLength" class="valid color-border">
                    <i class="fa fa-check"  aria-hidden="true"></i> &nbsp; &nbsp;8 Characters
                  </span>
                  <!-- </div> -->
                  <!-- <div class="col">

                  </div> -->
                </div>
              </div>
            </div>

            <!-- <p class="f_wt_500 f_size_15">The password should not be last password</p> -->

          </form>
        </mat-dialog-content>

        <br>

        <mat-dialog-actions>
          <button class="popupbtns" [disabled]="passwordForm.invalid" (click)="updatePassword()">
            Submit
          </button>
        </mat-dialog-actions>
      </ng-template>
    </div>
  </div>
</div>

<!-- DEBUG
<br><br><br>VALID : <br>
<pre>about_you : {{profileForm.get('about_you').valid}}</pre>
<pre>gender : {{profileForm.get('gender').valid}}</pre>
<pre>is_student_or_professional : {{profileForm.get('is_student_or_professional').valid}}</pre>
<pre>languages_known : {{profileForm.get('languages_known').valid}}</pre>
<pre>country : {{profileForm.get('country').valid}}</pre>
<pre>state : {{profileForm.get('state').valid}}</pre>
<pre>city_town : {{profileForm.get('city_town').valid}}</pre>
<pre>progress : {{profileForm.get('progress').valid}}</pre>
<pre>certificate : {{profileForm.get('certificate').valid}}</pre>
<pre>qualification : {{profileForm.get('qualification').valid}}</pre>
<pre>social_media : {{profileForm.get('social_media').valid}}</pre>
<pre>professional : {{profileForm.get('professional').valid}}</pre>
<br> -->

<!-- {{profileForm.value | json}} -->




<!-- //////////End of first section left part/////////// -->
<!-- //////FIrst section Right part//////// -->
<!-- <div class="col-md-8 col-sm-12 col-12 right">
              <div class="row float_right">
                <label class="f_size_20 f_wt_400">My Profile</label>
                <ng-container *ngIf="cannotEdit">
                  <mat-icon matTooltip="Click here to change profile details" (click)="cannotEdit = !cannotEdit;"
                    class="m-l-10px f_size_20">create
                  </mat-icon>
                </ng-container>
                <ng-container *ngIf="!cannotEdit">
                  <mat-icon matTooltip="You can start editing" (click)="cannotEdit = !cannotEdit;"
                    class="m-l-10px f_size_20">create
                  </mat-icon>
                </ng-container>
              </div>
              <br><br><br>
              <div class=row>
                <div class="col-md-8"></div>
                <div class="col-md-2 col-sm-6 col-6 float_right">
                  <img
                    [src]="profileForm.value.profile_img ? profileForm.value.profile_img : '../../../../assets/learner/avatar2.png'"
                    id="imageUpload" accept=".png, .jpg, .jpeg" #fileInput alt="Avatar" class="avatar">
                  <input style="display: none;" id="fileInput" type='file' #fileInput (change)="onSelectFile($event)">
                  <mat-icon *ngIf="!cannotEdit" class="camIcon" for="fileInput" (click)="fileInput.click()">camera_alt
                  </mat-icon>
                </div>
                <div class="col-md-2 col-sm-6 col-6" *ngIf="userData && userData != null">
                  <label class="f_wt_400 m-l-10px space5">{{userData.full_name}}</label><br>
                  <label class="f_wt_400 m-l-10px">{{userData.user_dtl && userData.user_dtl.username}}</label><br>
                  <label
                    class="f_wt_400 m-l-10px">{{userData.user_dtl && userData.user_dtl.created_on | date : "dd.MM.y"}}</label>
                </div>
              </div>
              <br>
              <div class="row">
                <div class="col-md-8"> </div>
                <div class="col-md-4">
                  <span class="percent color_blue">{{profileForm.value.progress || '10'}}%</span>
                  <mat-progress-bar class="" mode="determinate"
                    [value]="profileForm.value.progress || 10">
                  </mat-progress-bar>
                </div>
              </div>
              <br>
              <div class="row" *ngIf="userData">
                <div class="col-md-8"> </div>
                <div class="col-md-3 col-sm-8 col-8">
                  <span class="color_blue">Password</span>
                </div>
                <div class="col-md-1 col-sm-4 col-4" *ngIf="editpopup">
                  <mat-icon class="f_size_17" matTooltip="Click here to change Password"
                    (click)="editPassword(passwordDialog)">create</mat-icon>
                </div>
              </div>
              <br>
              <div class="row" *ngIf="userData.user_mobile">
                <div class="col-md-8"> </div>
                <div class="col-md-3 col-sm-8 col-8">
                  <span class="color_blue">{{userData.user_mobile.mobile_number}}</span>
                </div>
                <div class="col-md-1 col-sm-4 col-4" *ngIf="editpopup">
                  <mat-icon class="f_size_17" matTooltip="Click here to change Mobile number"
                    (click)="editmobno(mobDialog)">create</mat-icon>
                </div>
              </div>
              <br>
              <div class="row" *ngIf="userData.email">
                <div class="col-md-8"> </div>
                <div class="col-md-3 col-sm-8 col-8">
                  <span class="color_blue">{{userData.email}}</span>
                </div>
                <div class="col-md-1 col-sm-4 col-4" *ngIf="editpopup">
                  <mat-icon class="f_size_17" matTooltip="Click here to change Email Id"
                    (click)="editEmail(emailDialog)">create</mat-icon>
                </div>
              </div>
              <br><br>
            </div> -->