<app-header></app-header>

<div class="spinner-container" *ngIf="loading">
  <mat-spinner diameter="40" class="mat-spinner-color"></mat-spinner>
</div>

<div (click)="closePopup()">
  <div class="row">
    <div [ngClass]="expandSearch ? 'mobileSearchRow': 'myCourseSearch'" class="col-12">
      <mat-icon class="glyphicon" (click)="expandSearch = !expandSearch">keyboard_backspace</mat-icon>
      <!-- NEED TO WORK ON SEARCH -->
      <input type="text" class="form-control search" [(ngModel)]="searchName" />
    </div>
  </div>
  <div *ngIf="!expandSearch" class="row w-100 mr-0 ml-0">
    <!-- *ngIf="jobRole?.length < 1" -->
    <div class="col-10 col-sm-10 col-md-4 col-lg-6 col-xl-7 catalogTitle">
      <div class="f_size_22  myC-head animated animatedFadeInUp fadeInUp " style="font-size: 22px;">
        {{'My Courses' | translate }}</div>
    </div>


    <div class="col-2 col-sm-2 col-md-8 col-lg-6 col-xl-5 catalogDropdownCol">
      <span class="mobileIcons">
        <mat-icon class="searchIcons" (click)="expandSearch = !expandSearch">search</mat-icon>
        <mat-icon class="filterIcon" [matMenuTriggerFor]="menu">filter_alt</mat-icon>
      </span>
      <mat-menu #menu="matMenu">
        <button class="matTabMenu" mat-menu-item (click)="getDashboardMyCourse(userDetailes.user_id, userDetailes._id)"
          *ngFor="let categorytab of categoryDetails">
          <span>{{ categorytab.categoryName | titlecase }} </span>
          <span class="dynamicBagdes" matBadge="{{categorytab.enrollCount}}" matBadgeOverlap="false"></span>
        </button>
      </mat-menu>



      <div class="row ml-0 mr-0">
        <div class="col-6 col-md-7 col-lg-7 col-xl-7 searchCol text-right">

          <!---------------Multi-level dropdown------------->
          <div class="inner-addon searchDiv right-addon" style="display: none;">
            <input type="text" [ngClass]="searchExpand? 'form-control search' :'form-control searchNormal'"
              [(ngModel)]="searchName" placeholder="Search courses..." />
              <!-- (keyup)="getDashboardMyCourse(userDetailes.user_id, userDetailes._id)" -->
            <em class="material-icons pointer iconsSearch" *ngIf="!searchExpand"
              (click)="searchExpand = !searchExpand">search</em>
            <em class="material-icons pointer iconsSearch" *ngIf="searchExpand"
              (click)="searchExpand = !searchExpand; searchName=''">close</em>
            <!-- <mat-icon class="glyphicon" (click)="searchExpand = !searchExpand">search</mat-icon> -->
          </div>
        </div>
        <div class="col-6 col-md-5 col-lg-5 col-xl-5 availableCol" *ngIf="showDrpdwnBtn">
          <div>
            <span (click)="triggerPopups()">
              <button [disabled]="disableDropdown" (mouseenter)="triggerPopup()" (mouseleave)="closePopup()"
                class="btn dropdown-toggle catDropdown float-right mr-3" type="button" id="dropdownMenu1"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                {{'Available Courses' | titlecase}}

                <ul class="dropdown-menu first-level multi-level" role="menu" id="dropMenu" aria-labelledby="dropdownMenu">
                  <span>
                    <span *ngFor="let item of categories">
                      <!-- viewCourse(item,item.categoryName,item.totalCount) -->
                      <li *ngIf="item.subCategory == null" class="dropdown-item"
                        (click)="getCoureBasedOnCatalog(dropDownCategoryDetails,item,'',''); viewCourse(item,previewDialog, item.categoryName,item.totalCount)">
                        <span
                          *ngIf="item.categoryName.length > 17">{{(item?.categoryName | titlecase | slice:0:17)+'...'}}</span>
                        <span *ngIf="item.categoryName.length <= 17">{{item?.categoryName | titlecase}}</span>
                        <span class="matBadgeNew" matBadge="{{item.totalCount}}" matBadgeOverlap="false"></span>
                      </li>
    
                      <li *ngIf="item.subCategory && item.subCategory.length > 0" class="dropdown-submenu">
                        <a class="dropdown-item" tabindex="-1">
                          <!-- tooltip="{{item?.categoryName | titlecase}}"  placement="top" -->
                          <span
                            *ngIf="item.categoryName.length > 17">{{(item?.categoryName | titlecase | slice:0:17)+'...'}}</span>
                          <span *ngIf="item.categoryName.length <= 17">{{item?.categoryName | titlecase}}</span>
                          <span class="dynamicBagde" matBadge="{{item.totalCount}}" matBadgeOverlap="false"></span>
                        </a>
                        <!----------------------------Sub menu----------------------->
                        <ul class="dropdown-menu subMenu">
                          <span *ngFor="let subchild of item.subCategory">
                            <li *ngIf="subchild.superSubCategory == null" class="dropdown-item superSubMenuItem">
                              <!-- tooltip="{{subchild.subCategoryName | titlecase}}"  placement="top" -->
                              <span class="superSubSpan"
                                *ngIf="subchild.subCategoryName.length > 17">{{subchild.subCategoryName | titlecase}}</span>
                              <span
                                *ngIf="subchild.subCategoryName.length <= 17">{{subchild.subCategoryName | titlecase}}</span>
                              <span class="matBadgeSubmenu" matBadge="{{subchild.totalCount}}"
                                matBadgeOverlap="false"></span>
                            </li>
    
                            <li *ngIf="subchild.superSubCategory && subchild.superSubCategory.length > 0"
                              class="dropdown-submenu">
                              <a class="dropdown-item" tabindex="-1">
                                <!-- tooltip="{{subchild.subCategoryName | titlecase}}" placement="top" -->
                                <span class="superSubSpan"
                                  *ngIf="subchild.subCategoryName.length >17">{{subchild.subCategoryName | titlecase }}</span>
                                <span
                                  *ngIf="subchild.subCategoryName.length <=17">{{subchild.subCategoryName | titlecase}}</span>
                                <span class="matBadgeSubmenu" matBadge="{{subchild.totalCount}}"
                                  matBadgeOverlap="false"></span>
                              </a>
    
                              <!------------------------------Super sub menu----------------------------------->
                              <ul class="dropdown-menu superSubMenu">
                                <span *ngFor="let superChild of subchild.superSubCategory">
                                  <!-- viewCourse(item,superChild.superSubCategoryName,superChild.totalCount) -->
                                  <li class="dropdown-item superSubMenuItem"
                                    (click)="menuSelect(subchild,superChild); viewCourse(item,previewDialog,superChild.superSubCategoryName,superChild.totalCount);
                                getCoureBasedOnCatalog(dropDownCategoryDetails,item,subchild.subCategoryId, superChild.superSubCategoryId)">
                                    <!-- tooltip="{{superChild.superSubCategoryName | titlecase}}"
                                  placement="top" -->
                                    <span class="superSubSpan"
                                      *ngIf="superChild.superSubCategoryName.length > 17">{{superChild.superSubCategoryName | titlecase }}</span>
                                    <span
                                      *ngIf="superChild.superSubCategoryName.length <= 17">{{superChild.superSubCategoryName | titlecase}}</span>
                                    <span class="matBadgesuperSub" matBadge="{{superChild.totalCount}}"
                                      matBadgeOverlap="false"></span>
                                  </li>
                                </span>
                              </ul>
                            </li>
                          </span>
                        </ul>
                      </li>
                    </span>
                  </span>
                  <!-- *ngIf="!showAvailableCourse" -->
                  <!-- <span class="availableCourseSpinner">
                  <mat-spinner diameter="30" class="mat-spinner-color"></mat-spinner>
                  </span> -->
                </ul>
              </button>
            </span>
          </div>

          <!-- <div class="inner-addon searchDiv right-addon">
            <mat-icon class="glyphicon">search</mat-icon>
            <input type="text" (click)="searchExpand = !searchExpand" class="form-control search"
              [(ngModel)]="searchName" (keyup)="getEnrolledCourses('', '', '', '', searchName,false)"
              placeholder="Search courses..." />
          </div> -->
        </div>
      </div>
      <div>
        <!-- <mat-button class="available-course-btn" [matMenuTriggerFor]="menunew" #menuTrigger="matMenuTrigger" (mouseover)="menuTrigger.openMenu()" >
                <span class="lxp-text">{{catalogueDetails?.catalogueName | titlecase}} <mat-icon class="dropdownicon">expand_more</mat-icon></span>
              </mat-button>
                <mat-menu focusOnOpen = false  #menunew="matMenu" [overlapTrigger]="false" class="customize mouseleave">
                  <div (mouseleave)="menuTrigger.closeMenu()">
                    <button  *ngFor="let category of categoryDetails" mat-menu-item (click)="getCoureBasedOnCatalog(catalogueDetails,category,previewDialog)">
                      <span>{{category.categoryName | titlecase}}</span>
                        <span class="matBadge"   matBadge="{{category.totalCount}}"  matBadgeOverlap="false"></span>
                    </button>
                  </div>
                  </mat-menu> -->
      </div>
    </div>
  </div>

  <!-- tabs here -->
  <div class="row bodybg">
    <div class="col-12 matTabCol">
      <!-- <div class="catPost">
            <span *ngFor="let namesss of categoryDetails" class="cathd1">
                <button *ngIf="namesss.enrollCount"  
                class="catnamesss" matBadge="{{namesss.enrollCount}}"
                 matBadgeOverlap="false" 
                 (click)="selectedIndex = 3; getEnrolledCourses(catalogueDetails.catalogueId,namesss.categoryId)"> {{namesss.categoryName | titlecase}}</button>
            </span>
            <span></span>
            </div> -->
      <mat-tab-group #tabs (selectedTabChange)="courseTabChange($event,userDetailes.user_id,userDetailes._id);"
        [(selectedIndex)]="selectedIndex" mat-align-tabs="start" animationDuration="1000ms"
        class="col-xl-12 col-lg-12 col-md-12 col-sm-12 myCc container p-0">
        <mat-tab>
          <!--  <div class="row mt-3">
          <div class="col-12 m-auto">
            <span class="menuBtnHoriz">{{
              categoryNamePrint | titlecase
            }}</span>
          </div>
        </div> -->

          <ng-template matTabLabel>
            <div style="display: flex !important;">
              <span class="tabsc" matBadge="{{
                jobRoleSelected === true
                  ? 1
                  : onGoingCourseCount
              }}" matBadgeOverlap="false">{{ 'Ongoing' | translate }}</span>
              <!-- NOT WORKING -->
            </div>
          </ng-template>

          <!-- Card start -->
          <div *ngIf="!showSkeleton; else skeletonLoad">
          <div *ngFor="let course of courseDetailsList | filter: searchName">
            <app-mycourse-item-component [courseItems]="course"></app-mycourse-item-component>
          </div>
          </div>
          <!-- card end -->

          <div *ngIf="showSkeleton==false && onGoingCourseCount === 0">
            <mat-card class="noSessionCard color-yellow-card-status">
              <div class="row mar-t-12">
                <div class="col-lg-2 col-xl-2 col-md-2 col-sm-2 col-12">
                  <img class="noSessionImg" src="assets/noCourseNewImg.svg"> 
                </div>
                <div class="col-lg-10 col-xl-10 col-md-10 col-sm-10 col-12 noData">
                  <span class=""> You have no ongoing courses at the moment!</span>
                </div>
              </div>
            </mat-card> 
          </div>
        </mat-tab>
        <mat-tab>
          <ng-template matTabLabel>
            <div style="display: flex !important;">
              <span class="tabsc" matBadge="{{
                  jobRoleSelected === true
                    ? jobOnGoingCourseCount
                    : onGoingCourseCount
                }}" matBadgeOverlap="false">{{ "Ongoing" | translate  }}</span>
            </div>
          </ng-template>

          <!-- Card start -->
          <div *ngIf="!showSkeleton; else skeletonLoad">
          <div *ngFor="let course of courseDetailsList  | filter: searchName">
            <app-mycourse-item-component [courseItems]="course"></app-mycourse-item-component>
          </div>
          </div>
          <!-- card end -->

          <div *ngIf="showSkeleton==false && onGoingCourseCount === 0">
            <!-- <mat-card class="coursebg width_90 errorCard">
              <div class="row width_90 no_margin">
                <div class="col-4 col-sm-4 col-md-1 display_flex pointer no_pl mt-4" (click)="gotoDesc(course)">
                  <img alt="Course Img" src="assets/noCourseNewImg.svg" class="courseImgs" />
                </div>
                <div class="col-8 col-md-11 no_pl errorboxx">
                  <span style="font-size: medium">{{ "You have no ongoing courses at the moment." | translate }}</span>
                </div>
              </div>
            </mat-card>
            <hr class="hr-tag" /> -->
            <mat-card class="noSessionCard color-yellow-card-status">
              <div class="row mar-t-12">
                <div class="col-lg-2 col-xl-2 col-md-2 col-sm-2 col-12">
                  <img class="noSessionImg" src="assets/noCourseNewImg.svg"> 
                </div>
                <div class="col-lg-10 col-xl-10 col-md-10 col-sm-10 col-12 noData">
                  <span class=""> You have no ongoing courses at the moment!</span>
                </div>
              </div>
            </mat-card> 
          </div>
        </mat-tab>
        <mat-tab>
          <ng-template matTabLabel>
            <span class="tabsc" matBadge="{{
                jobRoleSelected === true
                  ? jobCompletedCourseCount
                  : completedCourseCount
              }}" matBadgeOverlap="false">{{ "Completed" | translate }}</span>
          </ng-template>
          <div *ngIf="!showSkeleton; else skeletonLoad">
            <div *ngFor="let course of courseDetailsList  | filter: searchName">
              <!-- show 100% by default for completed courses // time-being for pilot run -->
              <app-mycourse-item-component [courseItems]="course" [globalData]="globalData" [completedCourse]="100">
              </app-mycourse-item-component>
              <div style="border-bottom: 1px solid #cccccc7a"></div>
            </div>
          </div>

          <div *ngIf=" showSkeleton==false && completedCourseCount === 0">

            <mat-card class="noSessionCard color-yellow-card-status">
              <div class="row mar-t-12">
                <div class="col-lg-2 col-xl-2 col-md-2 col-sm-2 col-12">
                  <img class="noSessionImg" src="assets/noCourseNewImg.svg"> 
                </div>
                <div class="col-lg-10 col-xl-10 col-md-10 col-sm-10 col-12 noData">
                  <span class=""> You have no completed courses at the moment!</span>
                </div>
              </div>
            </mat-card> 
            <!-- <hr class="hr-tag" /> -->
          </div>
        </mat-tab>
        <mat-tab>
          <ng-template matTabLabel>
            <span class="tabsc" matBadge="{{
                jobRoleSelected === true ? jobAllCourseCount : allCourseCount
              }}" matBadgeOverlap="false">{{ "All" | translate }}</span>
          </ng-template>
          <div *ngIf="!showSkeleton; else skeletonLoad">
          <div *ngFor="let course of courseDetailsList  | filter: searchName">
            <app-mycourse-item-component [globalData]="globalData" [courseItems]="course"></app-mycourse-item-component>
          </div>
        </div>

          <div *ngIf="showSkeleton==false && allCourseCount === 0">

            <mat-card class="noSessionCard color-yellow-card-status">
              <div class="row mar-t-12">
                <div class="col-lg-2 col-xl-2 col-md-2 col-sm-2 col-12">
                  <img class="noSessionImg" src="assets/noCourseNewImg.svg"> 
                </div>
                <div class="col-lg-10 col-xl-10 col-md-10 col-sm-10 col-12 noData">
                  <span class=""> You have no courses at the moment!</span>
                </div>
              </div>
            </mat-card> 
          </div>
        </mat-tab>
        <!-----------------------------------Category tabs----------------------------->


      </mat-tab-group>
      <button class="menuBtn" mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="getDashboardMyCourse(userDetailes.user_id,userDetailes._id)"
          *ngFor="let categorytab of categoryDetails">
          <span>{{ categorytab.categoryName }}</span>
        </button>
      </mat-menu>
    </div>
  </div>

  <ng-template #skeletonLoad>
    <mat-card class="coursebg card12">
      <div class="row">
        <div class="col-12 col-sm-12 col-md-12 col-lg-12">
          <div class="row">
            <div class="col-12 col-sm-12 col-md-4 col-lg-2">
              <ngx-skeleton-loader appearance="circle" animation="pulse"
                [theme]="{width: '190px',height: '120px','border-radius': '10px'}">
              </ngx-skeleton-loader>
            </div>
            <div class="col-12 col-sm-12 col-md-8 col-lg-4">
              <ngx-skeleton-loader count="7" animation="pulse"></ngx-skeleton-loader>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-3">
              <div class="row">
                <ngx-skeleton-loader count="1" animation="pulse"></ngx-skeleton-loader>
                <div class="col">
                  <ngx-skeleton-loader appearance="circle" animation="pulse"
                    [theme]="{width: '100px',height: '80px','border-radius': '10px'}">
                  </ngx-skeleton-loader>
                </div>
                <div class="col">
                  <ngx-skeleton-loader count="4" animation="pulse"></ngx-skeleton-loader>
                </div>
              </div>
              <div class="row">
                <ngx-skeleton-loader count="1" animation="pulse"></ngx-skeleton-loader>
                <div class="col">
                  <ngx-skeleton-loader appearance="circle" animation="pulse"
                    [theme]="{width: '100px',height: '80px','border-radius': '10px'}">
                  </ngx-skeleton-loader>
                </div>
                <div class="col">
                  <ngx-skeleton-loader count="4" animation="pulse"></ngx-skeleton-loader>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-3">
              <div class="row">
                <ngx-skeleton-loader count="1" animation="pulse"></ngx-skeleton-loader>
                <div class="col">
                  <ngx-skeleton-loader appearance="circle" animation="pulse"
                    [theme]="{width: '100px',height: '80px','border-radius': '10px'}">
                  </ngx-skeleton-loader>
                </div>
                <div class="col">
                  <ngx-skeleton-loader count="4" animation="pulse"></ngx-skeleton-loader>
                </div>
              </div>
              <div class="row">
                <ngx-skeleton-loader count="1" animation="pulse"></ngx-skeleton-loader>
                <div class="col">
                  <ngx-skeleton-loader appearance="circle" animation="pulse"
                    [theme]="{width: '100px',height: '80px','border-radius': '10px'}">
                  </ngx-skeleton-loader>
                </div>
                <div class="col">
                  <ngx-skeleton-loader count="4" animation="pulse"></ngx-skeleton-loader>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </mat-card>
  
  </ng-template>

  <ng-template #previewDialog>
    <mat-dialog-title>
      <div class="row rowMargin">
        <div class="col-8 text-left">
          <mat-icon class="arrowPopup mr-2" *ngIf="availableCource" aria-hidden="false" (click)="closedialogbox()">
            keyboard_backspace</mat-icon>
          <span class="f_wt_600 size catnamenew" *ngIf="!availableCource">{{ categoryPopupData  | titlecase}}
            ({{categoryCount}})</span>
        </div>
        <!-- <div class="col-0 col-sm-0 col-md-0 col-lg-6"> -->
        <!-- <div class="col-4">
            <input  matInput class="form-control popupsearch" placeholder="Search" [(ngModel)]="courseSearch">
        </div> -->
        <!-- </div> -->
        <div class="col-4 text-right">
          <mat-icon class="arrowIcon mr-2" *ngIf="availableCource" aria-hidden="false"
            (click)="closedialogbox((availableCource = false))">clear</mat-icon>
          <button mat-mini-fab class="close-button" *ngIf="!availableCource">
            <mat-icon class="download-icon" (click)="closedialogbox()">close</mat-icon>
          </button>
        </div>
      </div>
    </mat-dialog-title>

    <mat-dialog-content class="cardContainer">
      <div class="row a-e" *ngIf="catagoryName !== 'vocational'">
        <div class="col-8" *ngIf="categoryCount > 0">
          <span class="f_wt_600 size float-left catnamenew" *ngIf="availableCource">{{ categoryPopupData  | titlecase}}
            ({{categoryCount}})</span>
        </div>
        <div class="col-4 inner-addon right-addon" *ngIf="categoryCount > 0">
          <mat-icon class="searchIcon">search</mat-icon>
          <input type="text" class="form-control ccSearch" [(ngModel)]="courseSearch" placeholder="Search.." />
        </div>
      </div>
      <div class="row a-e" *ngIf="catagoryName === 'vocational'">
        <div class="col-12" *ngIf="categoryCount > 0">
          <span class="f_wt_600 size float-left catnamenew" *ngIf="availableCource">{{ categoryPopupData  | titlecase}}
            ({{categoryCount}})</span>
          <button mat-stroked-button (click)="claimAll()" [disabled]="claimedStatuts?.length === 0"
            class=" btl-alin blue_clr cap pointer m-t-05">
            <!-- <mat-icon class="icon-color m-t-m-2">play_circle_outline</mat-icon> -->
            <span class="cap f_wt_400 m-t-m-2">
              {{'CLAIM ALL'| translate }}
            </span>
          </button>
        </div>
        <div class="col inner-addon right-addon" *ngIf="categoryCount > 0">
          <input type="text" class="form-control popupsearch" [(ngModel)]="courseSearch" placeholder="Search.." />
          <mat-icon class="popupsearchIcon">search</mat-icon>
        </div>
      </div>

      <div class="row" *ngIf="categoryData.totalCount > 1">

        <ng-container *ngIf="( allcourses | search : courseSearch) as result">
          <ng-container *ngIf="result.length > 0">
            <div class="col-12 col-sm-12 col-md-6 col-lg-4 mt-4"
              *ngFor="let course of allcourses | search : courseSearch">

              <!-- <div class="col-4 mt-4" *ngFor="let course of allcourses | search : courseSearch"> -->
              <mat-card class="box-shadow">
                <div class="row">
                  <div class="col-12 imageover">
                    <a>
                      <img alt="course " src="{{course.course_img_url}}" class="courseImage image">

                      <div class="overlayimage">
                        <p class="shortdesc h-50">
                          <!-- {{course.course_description}} -->
                          {{(course.course_description?.length>122)? (course.course_description | slice:0:122)+'...':(course.course_description) }}
                        </p>
                      </div>
                    </a>
                  </div>

                </div><br>
                <div class="row">
                  <span class="courseName1" *ngIf="course.course_name?.length > 28" tooltip="{{course.course_name}}"
                    placement="right">{{(course.course_name | slice:0:28)+'...'}}</span>
                  <span class="courseName1" *ngIf="course.course_name?.length <= 28">{{course.course_name}}</span>
                </div><br>
                <div class="row">
                  <div class="col-12 center_align">
                    <button mat-stroked-button class="blue_clr btnredClass" *ngIf="course.clamaiedStatus == 'false'"
                      (click)="claimCourse(course)">
                      <mat-icon class="mt-1">queue_play_next</mat-icon> {{'Claim'| translate }}
                    </button>
                    <button mat-stroked-button class="blue_clr btnredClass" [disabled]="course.clamaiedStatus == 'true'"
                      *ngIf="course.clamaiedStatus == 'true'">
                      <mat-icon class="mt-1 claimIcon">queue_play_next</mat-icon> {{'Claimed'| translate }}
                    </button>
                  </div>
                </div>
              </mat-card>
            </div>
          </ng-container>
          <div class="col errorDialouge" *ngIf="result.length === 0">
            <span style="font-size: medium;">
              No courses found
            </span>
          </div>
        </ng-container>


        <!-- <div class="col errorDialouge" *ngIf="categoryCount < 1 && result.length === 0">
        <span style="font-size: medium;">
        No courses found
        </span>
    </div> -->
      </div>
    </mat-dialog-content>
  </ng-template>



  <!-- Model for mobile user  -->
  <!-- data-toggle="modal" data-target="#myModal" -->
  <!-- <div class="modal" *ngIf="show" id="myModal" role="dialog">
    <div class="modal-content">
        <div class="modal-header">
            <span style="font-size:22px; color: red;">{{'Alert !' | translate }}</span>
        </div>
        <div class="modal-body">
            <p class="f_size_16">{{'Courses works best in Laptop / Desktop.' | translate }}</p>
            <p class="f_size_16">{{'Accessing courses via mobile is forbidden.' | translate }} </p>
            <div class="row">
                <div class="col-8">
                    <p><b>{{'Recommended browsers' | translate }}</b></p>
                </div>
                <div class="col-1">
                    <a class="showbtn" (click)="alterDescriptionText()"> {{ showShortDesciption ? '>>': '<<' }}</a>
                </div>
            </div>
            <div [ngClass]="{'show-less': showShortDesciption}">
                <p>{{'L&T supports the most recent versions of the following browsers.' | translate }}</p>
                <ul>
                    <li>{{'Google Chrome' | translate }} ({{'recommended' | translate }})</li>
                    <li>{{'Firefox' | translate }}</li>
                    <li>{{'Safari' | translate }}</li>
                    <li>{{'Internet Explorer 11' | translate }}</li>
                    <li>{{'Microsoft Edge' | translate }}</li>

                </ul>
                <p>If you're using an older browser , updating your browser can help solve problems.</p>
            </div>


        </div>
        <div class="modal-footer">
            <button class="roundbtn" data-dismiss="modal" (click)="close()">Close</button>
        </div>
    </div>
</div> -->
</div>
<!----------------------- Overlay available cources screen -------------------------------->
<div class="container" [ngClass]="availableCource == true ? 'availableContainer' : 'availableCont'">
  <div class="row" *ngIf="dropdownCatDetails">
    <div class="col-12 pr-0">
      <div class="row">
        <div class="col-6 text-left font-weight-bold hedding">
          <p>Available Courses</p>
        </div>
        <div class="col-6 text-right">
          <mat-icon class="arrowIcon mr-2" aria-hidden="false" (click)="clostAvailContainer(availableCource = false); 
          isExpandCourseTemp = false; expandActivityNameTemp = '';isExpChild = false">clear</mat-icon>
        </div>
      </div>
      <ng-container *ngFor="let category of dropdownCatDetails.categories">
        <div class="parrentAccordian">
          <div class="row w-100 h-100">
            <div class="col-12 m-auto pr-0">
              <!-- viewCourse(
                category,
                category.categoryName,
                category.totalCount
              ) -->
              <div *ngIf="!category.subCategory" (click)="
                  getCoureBasedOnCatalog(dropdownCatDetails, category, '', '')" (click)="
                  isExpandCourseTemp &&
                  expandActivityNameTemp == category.categoryId
                    ? onexpTemp(category, category.categoryId, false)
                    : onexpTemp(category, category.categoryId, true)
                ">
                <span class="accordianText"> {{ category.categoryName | titlecase }}</span>
                <span class="matBadgeAvail" matBadge="{{ category.totalCount }}" matBadgeOverlap="false"></span>
              </div>
              <div *ngIf="category.subCategory" (click)="
             onCloseTab(); isExpandCourseTemp &&
            expandActivityNameTemp == category.categoryId
              ? onexpTemp(category, category.categoryId, false)
              : onexpTemp(category, category.categoryId, true)
          ">
                <span class="accordianText">
                  {{ category.categoryName | titlecase
                }}
                </span>
                <span class="matBadgeAvail" matBadge="{{ category.totalCount }}" matBadgeOverlap="false"></span>
              </div>
              <!-- viewCourse(category,
                    category.categoryName,category.totalCount) -->
              <mat-icon class="arrowIcon float-right " aria-hidden="false"
                *ngIf="!category.subCategory && category.categoryName !== 'vocational'"
                (click)="getCoureBasedOnCatalog(dropdownCatDetails, category, '', '')">keyboard_arrow_down</mat-icon>
              <mat-icon class="arrowIcon float-right" aria-hidden="false" *ngIf="expandActivityNameTemp !== category.categoryId &&
                  category.subCategory && category.categoryName == 'vocational'" (click)="isExpandCourseTemp && expandActivityNameTemp == category.categoryId ? onexpTemp(category, category.categoryId, false)
                    : onexpTemp(category, category.categoryId, true)">keyboard_arrow_down</mat-icon>
              <mat-icon class="arrowIcon float-right" aria-hidden="false"
                *ngIf="isExpandCourseTemp && expandActivityNameTemp == category.categoryId && category.categoryName == 'vocational'"
                (click)="
                onCloseTab(); isExpandCourseTemp && expandActivityNameTemp == category.categoryId ? onexpTemp(category, category.categoryId, false) : onexpTemp(category, category.categoryId, true)">
                keyboard_arrow_up</mat-icon>

              <ng-container *ngIf="
                  isExpandCourseTemp &&
                  expandActivityNameTemp == category.categoryId
                ">
                <ng-container *ngFor="let subCatet of category.subCategory">
                  <div class="parrentAccordianSub">
                    <div class="row w-100 h-100">
                      <div class="col-12 m-auto pr-0">
                        <div class="pb-3 " [disabled]="subCatet.totalCount == 0" (click)="
                          isExpChild &&
                          expandActivityNameChildTemp ==
                            subCatet.subCategoryId
                            ? onexpchildTemp(subCatet.subCategoryId, false)
                            : onexpchildTemp(subCatet.subCategoryId, true)
                        ">
                          <span *ngIf="subCatet.subCategoryName?.length > 28" class="accordianText ml-5">
                            {{ (subCatet.subCategoryName | titlecase | slice:0:15)+'...' }}
                          </span>
                          <span *ngIf="subCatet.subCategoryName?.length < 28" class="accordianText ml-5">
                            {{ subCatet.subCategoryName | titlecase }}
                          </span>
                          <span class="matBadgeAvail" matBadge="{{ subCatet.totalCount }}"
                            matBadgeOverlap="false"></span>
                          <mat-icon class="arrowIcon float-right accordianText" aria-hidden="false"
                            *ngIf="subCatet.superSubCategory == null">keyboard_arrow_down</mat-icon>
                          <span *ngIf="subCatet.superSubCategory !== null">
                            <mat-icon class="arrowIcon float-right accordianText" aria-hidden="false"
                              *ngIf="!isExpChild || expandActivityNameChildTemp !== subCatet.subCategoryId" (click)="
                          isExpChild &&
                            expandActivityNameChildTemp ==
                              subCatet.subCategoryId
                              ? onexpchildTemp(
                                  subCatet,
                                  subCatet.subCategoryId,
                                  false
                                )
                              : onexpchildTemp(
                                  subCatet,
                                  subCatet.subCategoryId,
                                  true
                                )
                          ">keyboard_arrow_down</mat-icon>
                          </span>
                          <mat-icon class="arrowIcon float-right accordianText" aria-hidden="false" *ngIf="
                            isExpChild &&
                            subCatet.superSubCategory &&
                            expandActivityNameChildTemp ==
                              subCatet.subCategoryId
                          " (click)="
                            isExpChild">
                            keyboard_arrow_up</mat-icon>
                        </div>
                        <ng-container *ngIf="
                            isExpChild &&
                            expandActivityNameChildTemp ==
                              subCatet.subCategoryId
                          ">
                          <ng-container *ngFor="
                              let superSubCat of subCatet.superSubCategory
                            ">
                            <div class="parrentAccordiansuper">
                              <div class="row w-100 h-100 parrentSubAccord">
                                <div class="col-12 m-auto pr-0 superSubCatDiv">
                                  <span *ngIf="superSubCat.superSubCategoryName?.length > 28" class="accordianTextsub"
                                    (click)="
                                      menuSelect(subCatet, superSubCat);
                                      getCoureBasedOnCatalog(
                                        dropdownCatDetails,
                                        category,
                                        subCatet.subCategoryId,
                                        superSubCat.superSubCategoryId
                                      );">{{
                                      (superSubCat.superSubCategoryName
                                        | titlecase | slice:0:15)+'...'
                                    }}</span>
                                  <!-- viewCourse(
                                      category,
                                      superSubCat.superSubCategoryName,
                                      superSubCat.totalCount
                                    ) -->
                                  <span class="matBadgeAvailSuperSub" matBadge="{{ superSubCat.totalCount }}"
                                    matBadgeOverlap="false"></span>

                                  <span *ngIf="superSubCat.superSubCategoryName?.length < 28" class="accordianTextsub"
                                    (click)="
                                        menuSelect(subCatet, superSubCat);
                                        getCoureBasedOnCatalog(
                                          dropdownCatDetails,
                                          category,
                                          subCatet.subCategoryId,
                                          superSubCat.superSubCategoryId
                                        );">{{
                                        superSubCat.superSubCategoryName
                                          | titlecase 
                                      }}</span>
                                  <!-- viewCourse(
                                        category,
                                        superSubCat.superSubCategoryName,
                                        superSubCat.totalCount
                                      ) -->
                                  <span class="matBadgeAvailSuperSub" matBadge="{{ superSubCat.totalCount }}"
                                    matBadgeOverlap="false"></span>
                                </div>
                              </div>
                            </div>
                          </ng-container>
                        </ng-container>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </ng-container>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
  <br [ngClass]="availableCource == true ? 'displayNone' : ''" />
  <br [ngClass]="availableCource == true ? 'displayNone' : ''" />
  <div *ngIf="!loading" [ngClass]="availableCource == true ? 'displayNone' : ''">
    <div class="footer">
      <span class="powered">
        <span class="forgot1">2020 © L&T EduTech All Rights Reserved</span>
      </span>
    </div>
  </div>
</div>
<div class="footer">
  <span class="powered">
    <span class="forgot1">2020 © L&T EduTech All Rights Reserved</span>
  </span>
</div>