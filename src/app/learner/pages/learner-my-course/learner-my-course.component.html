<app-header></app-header>
<hr style="margin: 0 !important;">
<div class="bodybg" *ngIf="!loading">
  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12  p-0">
    <div >
    <mat-tab-group animationDuration="1000ms" class=" col-xl-12 col-lg-12 col-md-12 col-sm-12 myCc container p-0 ">
    
      <mat-tab [label]="'ON-GOING ('+incomplete?.length + ')'" [disabled]='incomplete?.length === 0'>
        <div class="container" *ngFor="let course of incomplete ;let j=index" [@EnterLeave]="'flyIn'">
          <mat-card class="coursebg" >
            <div class="row width_100 no_margin">
              <div class=" display_flex pointer no_pl"
                (click)="gotoDesc(course)">
              

            <div class="courseHover">
              <img alt="Course Img" src="{{course.course_img_url}}" class="courseImg">
              <div class="overlay">
                <mat-icon class="text"  > play_arrow </mat-icon>
              </div>
            </div>
              
              </div>
              <div class="col-xl-9 col-lg-9 col-md-9 col-sm-12 col-12 no_pl pad1020">
                <div class="width_100  f_size_22 f_wt_500 pointer" (click)="gotoDesc(course)">
                  {{course.course_name}}
                </div>
                <div class="width_100 color_black2 f_size_15 f_wt_400 m-l-1 pointer descmc" (click)="gotoDesc(course)">
                  {{(course.course_description?.length > 375)? (course.course_description | slice:0:375)+'...':(course.course_description) }}
                </div>
                <div class="width_100 color_black2 f_size_14 f_wt_400 space2 pointer" (click)="gotoDesc(course)">
                  {{course.course_mode === 'self-placed' ? 'Self paced' : course.course_mode}}
                  &nbsp;&nbsp;|&nbsp;&nbsp;
                  <span *ngFor="let l of course?.author_details;let in = index">
                    {{l.author_name && in != 0 ? ', ' + l.author_name : l.author_name || null}}
                  </span>
                  &nbsp;&nbsp;|&nbsp;&nbsp;
                  Course Duration: {{course.course_duration}} hours
                </div>
                <div class="row color_black f_size_12 f_wt_400 pointer" (click)="gotoDesc(course)">
                  <div class="width_100 display_flex">
                    <div class="width_35 pad-10-12">
                      <mat-progress-bar mode="determinate" [value]="course?.coursePlayerStatus?.course_percentage|| 0">
                      </mat-progress-bar>
                    </div> <span class="percent color_black2 pointer">
                      {{course?.coursePlayerStatus?.course_percentage}}%
                    </span>
                    <div class="margin"></div>
                    <div class="btl-alin">
                      <button mat-stroked-button *ngIf="course?.coursePlayerStatus?.status !== 'completed'"
                        class="blue_clr cap  statBtn pointer" (click)="gotoDesc(course)">
                        <mat-icon class="icon-color">play_circle_outline</mat-icon>
                      
                        &nbsp;<span class="cap f_wt_400">
                          {{course?.coursePlayerStatus?.status === 'incomplete' ? 'Resume' : 
                          course?.coursePlayerStatus?.status === 'start' ? 'Start' : 'Resume'}}&nbsp;
                        </span>
                      </button>
                    </div>
                  </div>
                 
                </div>
              </div>
            </div>
          </mat-card>
        </div>
        <div *ngIf="incomplete?.length === 0" class="space5">
          <mat-card class="coursebg width_60 center noCourse center_align">
            You have no enrolled courses at the moment
          </mat-card>
        </div>
      </mat-tab>
      
      <mat-tab [label]="'COMPLETED (' +completed?.length+ ')'" [disabled]='completed?.length === 0'>
        <div class="container" *ngFor="let course of completed;let k=index" [@EnterLeave]="'flyIn'">
          <mat-card class="coursebg">
            <div class="row width_100 no_margin">
              <div class=" display_flex pointer no_pl"
                (click)="gotoDesc(course)">
              
            <div class="courseHover">
              <img alt="Course Img" src="{{course.course_img_url}}" class="courseImg">
              <div class="overlay">
                <mat-icon class="text"  > play_arrow </mat-icon>
              </div>
            </div>
              
              </div>
              <div class="col-xl-9 col-lg-9 col-md-9 col-sm-12 col-12 no_pl pad1020">
                <div class="width_100  f_size_22 f_wt_500" (click)="gotoDesc(course)">
                  {{course.course_name}}
                </div>
                <div class="width_100 color_black2 f_size_15 f_wt_400 m-l-1 descmc" (click)="gotoDesc(course)">
                  {{(course.course_description?.length > 375)? (course.course_description | slice:0:375)+'...':(course.course_description) }}
                </div>
                <div class="width_100 color_black2 f_size_14 f_wt_400 space2" (click)="gotoDesc(course)">
                  {{course.course_mode === 'self-placed' ? 'Self paced' : course.course_mode}}
                  &nbsp;&nbsp;|&nbsp;&nbsp;
                  <span *ngFor="let l of course?.author_details;let in = index">
                    {{l.author_name && in != 0 ? ', ' + l.author_name : l.author_name || null}}
                  </span>
                  &nbsp;&nbsp;|&nbsp;&nbsp;
                  Course Duration: {{course?.course_duration}} hours
                </div>
                <div class="row color_black f_size_12 f_wt_400" (click)="gotoDesc(course)">
                  <div class="width_100 display_flex">
                    <div class="width_35 pad-10-12">
                      <mat-progress-bar mode="determinate" [value]="course?.coursePlayerStatus?.course_percentage|| 0">
                      </mat-progress-bar>
                    </div>
                    <span class="percent color_black2">
                      {{course?.coursePlayerStatus?.course_percentage}}%
                    </span>
                    <div class="margin"></div>
                    <div class="btl-alin">
                      <button mat-stroked-button *ngIf="course?.coursePlayerStatus?.status === 'completed'"
                        class="blue_clr cap  statBtn pointer" (click)="gotoDesc(course)">
                        <mat-icon class="icon-color">replay</mat-icon>
                        &nbsp;<span class="cap f_wt_400">
                          Replay&nbsp;
                        </span>
                      </button>
                    </div>
                  </div>
                
                </div>
              </div>
            </div>
          </mat-card>
        </div>
        <div *ngIf="completed?.length === 0" class="space5">
          <mat-card class="coursebg width_60 center noCourse center_align">
            You have no enrolled courses at the moment
          </mat-card>
        </div>
      </mat-tab>

      <mat-tab [label]="'ALL ('+enrolledCourses?.length +')'" [@EnterLeave]="'flyIn'">
        <!-- <ng-container > -->
          <div class="container" *ngFor="let course of enrolledCourses ;let i=index" >
          <mat-card class="coursebg" matRipple >
            <div class="row width_100 no_margin">
              <div class=" display_flex pointer no_pl"
                (click)="gotoDesc(course)">
              
            <div class="courseHover">
              <img alt="Course Img" src="{{course.course_img_url}}" class="courseImg">
              <div class="overlay">
                <mat-icon class="text"  > play_arrow </mat-icon>
              </div>
            </div>

              </div>
              <div class=" col-xl-9 col-lg-9 col-md-9 col-sm-12 col-12 no_pl pad1020">
                <div class="width_100  f_size_22 f_wt_500 pointer" (click)="gotoDesc(course)">
                  {{course.course_name}}
                </div>
                <div class="width_100 color_black2 f_size_15 descmc f_wt_400 m-l-1 pointer" (click)="gotoDesc(course)">
                  {{(course.course_description?.length > 100)? (course.course_description | slice:0:100)+'...':(course.course_description) }}
                </div>
                <div class="width_100 color_black2 f_size_14 f_wt_400 space2 pointer" (click)="gotoDesc(course)">
                  {{course.course_mode === 'self-placed' ? 'Self paced' : course.course_mode}}
                  &nbsp;&nbsp;|&nbsp;&nbsp;
                  <span *ngFor="let l of course?.author_details;let in = index">
                    {{l.author_name && in != 0 ? ', ' + l.author_name : l.author_name || null}}
                  </span>
                  &nbsp;&nbsp;|&nbsp;&nbsp;
                  Course Duration: {{course.course_duration}} hours
                </div>
                <div class="row color_black f_size_12 f_wt_400  pointer" (click)="gotoDesc(course)">
                  <div class="width_100 display_flex">
                    <div class="width_35 pad-10-12">
                      <mat-progress-bar mode="determinate" [value]="course?.coursePlayerStatus?.course_percentage|| 0">
                      </mat-progress-bar>
                    </div> <span class="percent color_black2">
                      {{course?.coursePlayerStatus?.course_percentage}}%
                    </span>
                    <div class="margin"></div>
                    <div class="btl-alin" >
                      <button mat-stroked-button *ngIf="course?.coursePlayerStatus?.status !== 'completed'"
                        class="blue_clr cap  statBtn pointer" (click)="gotoDesc(course)">
                        <mat-icon class="icon-color">play_circle_outline</mat-icon>
                        &nbsp;<span class="cap f_wt_400">
                          {{course?.coursePlayerStatus?.status === 'incomplete' ? 'Resume' : 
                            course?.coursePlayerStatus?.status === 'suspend' ? 'Resume' : 'Start'}}&nbsp;
                        </span>
                      </button>
                      <button mat-stroked-button *ngIf="course?.coursePlayerStatus?.status === 'completed'"
                        class="blue_clr cap statBtn pointer" (click)="gotoDesc(course)">
                        <mat-icon class="icon-color">replay</mat-icon>
                        &nbsp;<span class="cap f_wt_400">
                          Replay&nbsp;
                        </span>
                      </button>
                    </div>
                  </div>
                 
                </div>
              </div>
            </div>
          </mat-card>
        </div>
      
        <!-- </ng-container> -->
      
        <div *ngIf="enrolledCourses?.length === 0" class="space5">
        
          <mat-card class="coursebg width_90">
            <div class="row width_90 no_margin">
              <div class="col-xl-2 col-lg-2 col-md-3 col-sm-12 col-12 display_flex pointer no_pl"
                (click)="gotoDesc(course)">
                <div class="lineer"></div>
                <img alt="Course Img" src="assets/noCourseImg.jpg" class="courseImgs">
              </div>
              <div class="col-xl-10 col-lg-10 col-md-9 col-sm-12 col-12 no_pl"
                style="padding: 5px !important;margin : auto">

                <span style="font-size: medium;"> You have no enrolled courses at the moment.</span>
              </div>
            </div>
          </mat-card>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
  <div class="col-sm-4">
    <br/>
        <h1>Today's Sessions</h1>
        <mat-card class="coursebg width_100" *ngIf="results.message.length == 0">
          <div class="row width_100 no_margin">
            <div class="container-fluid">
              <div class="row">
                <div class="col-xl-2 col-lg-2 col-md-3 col-sm-12 col-12 display_flex pointer no_pl">
                  <div class="lineer"></div>
                </div>
                <div class="col-md-8" style="padding: 5px !important;font-size: medium;">
                  <p> {{ results.error_msg }}</p>
                </div>
              </div>
            </div>
          </div>
        </mat-card>
        <div *ngIf="results.message.length > 0">
          <mat-card *ngFor="let result of results.message" style="border-radius: 10px;">
            <!-- <div class="row width_100 no_margin"> -->
            <!-- <div class="container-fluid">
              <div class="row"> -->
            <!-- <div class="col-xl-2 col-lg-2 col-md-3 col-sm-12 col-12 display_flex pointer no_pl">
                    <div class="linee"></div>
                  </div> -->
            <div class="col-md-8" id="insidecard" class="uk-card uk-card-default uk-card-body" style="font-size: medium;"
              [ngClass]="{'color-blue': result.activity_details.ongoing == 'true', 'color-grey':result.activity_details.ongoing == 'false' }">
              <h5>{{strDate | date :'dd MMM yyyy'}} 
                <span *ngIf="result.activity_details.ongoing == 'true' "> | On-going</span>
              </h5>
              <p> {{ result.activity_details.coursename }}</p>
              <h5>{{ result.activity_details.activitytype }} | {{ result.activity_details.createdby_name }}</h5>
            </div>
            <!-- <div class="col-6 col-md-2" style="font-size: medium;padding: 5px !important;">
                  <h5>{{strDate | date :'hh:mm'}}</h5>
                  <br>
                  <p>Now</p>
                </div> -->
            <!-- </div>
            </div> -->
            <!-- </div> -->
          </mat-card>
        </div>
     
</div>
</div>
</mat-tab>
<mat-tab label="Calendar">
<app-learner-calendar></app-learner-calendar>
</mat-tab>
    <br>
    <br>
  </div>
</div>

<!-- Model for mobile user  -->
<div class="modal" *ngIf="show">
  <div class="modal-content">
    <div class="modal-header">
      <span style="font-size:22px; color: red;">Alert !</span>
    </div>
    <div class="modal-body">
      <p class="f_size_16">Courses works best in Laptop / Desktop.</p>
      <p class="f_size_16">Accessing courses via mobile is forbidden. </p>
      <div class="row">
        <div class="col-8">
          <p><b>Recommended browsers</b></p>
        </div>
        <div class="col-1">
          <a class="showbtn" (click)="alterDescriptionText()"> {{ showShortDesciption ? '>>': '<<' }}</a>
        </div>
      </div>
      <div [ngClass]="{'show-less': showShortDesciption}">
        <p>L&T supports the most recent versions of the following browsers.</p>
        <ul>
          <li>Google Chrome (recommended)</li>
          <li>Firefox</li>
          <li>Safari</li>
          <li>Internet Explorer 11</li>
          <li>Microsoft Edge</li>

        </ul>
        <p>If you're using an older browser , updating your browser can help solve problems.</p>
      </div>


    </div>
    <div class="modal-footer">
      <button class="roundbtn" (click)="close()">Close</button>
    </div>
  </div>
</div>

<div class="footer" *ngIf="!loading">
  <!-- <span class="float_left">2020 LARSEN & TOUBRO LIMITED. All rights reserved.</span> <span class="float_right">Copyright & Terms | Privacy Policy</span> -->

  <span class="center_align">© 2020 L&T EduTech. &nbsp; &nbsp; | &nbsp; &nbsp;
    <span class="powered">Powered by :
      <img width="160px" alt="" src="assets/learner/LT_small.svg">
    </span>
  </span>
</div>