<app-header></app-header>
<div class="progression-report-contianer d-flex">
  <div class="left-container">
    <div class="col d-flex pt-3">
      <em routerLink="/Learner/MyCourse" class="lxp-Right_Direction_Arrow backArrow"></em>
      <div class="breadcrum1">Applied Industrail IOT</div>
      <div class="partition">/</div>
      <div class="breadcrum2">Progression Report</div>
    </div>
    <div class="col mt-2">
      <div class="header-label">Progression Report</div>
    </div>
    <div class="col">
      <div class="flag-line">

      </div>
    </div>
    <div class="col d-flex">
      <div class="col-md-6">
        <div [ngStyle]="{'width': '300px',  'height':'300px'}">
          <canvas id="piechart"></canvas>
        </div>
      </div>
      <div class="col-md-6 d-flex align-item-center mt-5">
        <div class="activities-progress w-100">
          <div class="progress-label">Activities</div>
          <div class="d-flex color-yellow h-10">
            <div class="type-label">Assignment</div>
            <mat-progress-bar [mode]="mode" value="30" [bufferValue]="bufferValue"></mat-progress-bar>
            <div class="mark-level">06/16</div>
          </div>
          <div class="d-flex color-green h-10">
            <div class="type-label">Project</div>
            <mat-progress-bar [mode]="mode" value="60" [bufferValue]="bufferValue"></mat-progress-bar>
            <div class="mark-level">06/16</div>
          </div>
          <div class="d-flex color-yellow h-10">
            <div class="type-label">Perform</div>
            <mat-progress-bar [mode]="mode" value="20" [bufferValue]="bufferValue"></mat-progress-bar>
            <div class="mark-level">06/16</div>
          </div>
          <div class="d-flex color-grey h-10">
            <div class="type-label">Virtual Instructor Led Session</div>
            <mat-progress-bar [mode]="mode" value="10" [bufferValue]="bufferValue"></mat-progress-bar>
            <div class="mark-level">06/16</div>
          </div>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="self-learning-container">
        <div class="header-label">Self Learning Progression Report</div>
        <div class="expansion-container">
          <div class="mt-2"  *ngFor="let moduleItem of apidata.message.module" [ngClass]="moduleItem.overAllPercentage>0?moduleItem.overAllPercentage>99?'bar-complete':'bar-inprogress':'bar-inprogress'">
            <mat-progress-bar [mode]="mode" [value]="moduleItem.overAllPercentage" [bufferValue]="bufferValue"></mat-progress-bar>
            <mat-accordion>
              <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    <div class="week-block">
                      <div class="week-text">Week</div>
                      <div class="font-weight-bold week-number">{{getWeekNumber(moduleItem.week)}}</div>
                    </div>
                    <div class="pl-2">
                      <div class="week-text">Module</div>
                      <div class="font-weight-bold module-block">{{moduleItem.name}}</div>
                    </div>
                    <div>
                      <div class="week-text">Topics</div>
                      <div class="font-weight-bold text-center">{{moduleItem.topicCount.completed+'/'+moduleItem.topicCount.total}}</div>
                    </div>
                    <div class="pl-5">
                      <div class="week-text">Knowledge Check</div>
                      <div class="font-weight-bold text-center">{{moduleItem.knowledgeCount.completed+'/'+moduleItem.knowledgeCount.total}}</div>
                    </div>
                    <div class="pl-5">
                      <div class="week-text">Time Spent</div>
                      <div class="font-weight-bold text-center">{{moduleItem.totalDuration|date : 'hh:mm:ss'}}</div>
                    </div>
                    <div class="pl-5">
                      <circle-progress
                      [percent]='moduleItem.overAllPercentage'
                      [radius]= 17
                      [space]= -3
                      [outerStrokeGradient]= false
                      [outerStrokeWidth]= 3
                      [outerStrokeColor]= 'moduleItem.overAllPercentage>99?"#32CE6A":"#FFA800"'
                      [innerStrokeColor]= "'#bfbdbd'"
                      [innerStrokeWidth]= 3
                      [animation]="true"
                      [animationDuration]="300"
                      [showSubtitle] = "false"
                      [titleFontSize] = 13
                    ></circle-progress>
                    </div>
                    
                  </mat-panel-title>
                </mat-expansion-panel-header>
            <div class="topic-container col d-flex" *ngFor="let topicItem of moduleItem.topicDetails; let topicIndex = index">
              <div class="col-md-4">
                <div>
                  <div class="week-text">Topic: {{topicIndex+1}}</div>
                  <div class="font-weight-bold module-block">{{topicItem.name}}</div>
                </div>
              </div>
              <div class="col-md-7">
                <div class="d-flex first-layer">
                  <div class="types"> {{topicItem.activityDetails.name}}</div>
                  <div class="pl-5">
                    <div class="week-text">Time Spent</div>
                    <div class="font-weight-bold text-center">{{topicItem.activityDetails.totalDuration}}</div>
                  </div>
                  <div class="pl-5">
                    <div class="week-text">Completion Level</div>
                    <div class="font-weight-bold text-center">{{topicItem.activityDetails.completedPercentage}}%</div>
                  </div>
                </div>
                <div class="d-flex second-layer">
                  <div class="types">{{topicItem.knowledgeDetails.name}}</div>
                  <div class="pl-5">
                    <div class="week-text">Questions</div>
                    <div class="font-weight-bold text-center">{{topicItem.knowledgeDetails.totalQuestion?topicItem.knowledgeDetails.totalQuestion :'--'}}</div>
                  </div>
                  <div class="pl-5">
                    <div class="week-text">Correct</div>
                    <div class="font-weight-bold color-green text-center">{{topicItem.knowledgeDetails.correctAns?topicItem.knowledgeDetails.correctAns:'--'}}</div>
                  </div>
                  <div class="pl-5">
                    <div class="week-text">InCorrect</div>
                    <div class="font-weight-bold color-red text-center">{{topicItem.knowledgeDetails.incorrect?topicItem.knowledgeDetails.incorrect:'--'}}</div>
                  </div>
                </div>
              </div>
              <em class="lxp-info-circle tic-circle"></em>
            </div>
            
              </mat-expansion-panel>
            </mat-accordion>
          </div>
        </div>
      </div>
    </div>
    <div class="activity-container">
      <div class="header-label">Actitvities Progression Report</div>
      <div class="tab-container">
        <mat-tab-group (selectedTabChange)="tabChanged($event)" [(selectedIndex)]="selectedIndex">
          <mat-tab label="Assignment">
            <div class="card-content d-flex justify-content-between">
              <mat-card *ngFor="let assignmentModule of assignmentContent" class="card-container">
                <div class="card-topic">
                  {{assignmentModule?.files?.module_id}} > {{assignmentModule?.files?.topic_id}}
                </div>
                <div class="card-strip" [ngClass] = "{'card-strip-grey': assignmentModule?.files?.submit_status === 'notsubmitted', 'card-strip-green': assignmentModule?.files?.submit_status === 'ontime', 'card-strip-red': assignmentModule?.files?.submit_status === 'late'}"></div>
                <div class="card-description mt-4 font-weight-bold">{{assignmentModule?.files?.activityname}}</div>
                <div class="d-flex justify-content-between align-item-center mb-3">
                  <div class="date-content">
                    <div class="sub-header">Due on</div>
                    <div class="date-value">{{assignmentModule?.files?.activityenddate | date :'dd/MM/yyyy'}}</div>
                  </div>
                  <div class="date-content">
                    <div class="sub-header">Submitted on</div>
                    <div class="date-value" *ngIf="assignmentModule?.files?.submitted_date">{{assignmentModule?.files?.submitted_date | date :'dd/MM/yyyy'}}</div>
                    <div class="date-value" *ngIf="!assignmentModule?.files?.submitted_date">--</div>
                  </div>
                </div>
                <div class="lastRow d-flex justify-content-between align-item-center">
                  <div class="date-content first-content">
                    <div class="sub-header">Status</div>
                    <div class="statusCaps status-value-grey" *ngIf="assignmentModule?.files?.submit_status == 'notsubmitted'">
                      {{'Yet to Submit' | translate }}
                    </div>
                    <div class="statusCaps status-value-green" *ngIf="assignmentModule?.files?.submit_status == 'ontime'">
                      {{'OnTime' | translate }}
                    </div>
                    <div class="statusCaps status-value-green" *ngIf="assignmentModule?.files?.submit_status == 'submitted' || assignmentModule?.files?.submit_status == 'graded'">
                      {{'Completed' | translate }}
                    </div>
                    <div class="statusCaps status-value-red" *ngIf="assignmentModule?.files?.submit_status == 'late'">
                      {{'Late' | translate }}
                    </div>
                  </div>
                  <div class="date-content score-content">
                    <div class="sub-header">Score</div>
                    <div class="score-value">{{assignmentModule?.files?.score_mark ? assignmentModule?.files?.score_mark : '--'}}/{{assignmentModule?.files?.total_mark}}</div>
                  </div>
                  <div class="icon-content">
                    <em class="lxp-Assignments file-icon"></em>
                  </div>
                </div>
              </mat-card>
            </div>
            <div *ngIf="emptyAssignment">
              <mat-card class="noSessionCard color-yellow-card-status">
                <div class="row mar-t-12 noSessioncardRow">
                  <div class="col-lg-2 col-xl-2 col-md-2 col-sm-2 col-12">
                    <img class="actImg" src="assets/Assignment.svg" alt="assignment">
                  </div>
                  <div class="col-lg-10 col-xl-10 col-md-10 col-sm-10 col-12 noData">
                    <span class="spanTxt"> You have no assignments at the moment!</span>
                  </div>
                </div>
              </mat-card> 
            </div>
          </mat-tab>
          <mat-tab label="Project"> 
            <div class="card-content d-flex justify-content-between">
              <mat-card *ngFor="let projectModule of projectContent" class="card-container">
                <div class="card-topic">
                  {{projectModule?.projectActivity?.module_id}} > {{projectModule?.projectActivity?.topic_id}}
                </div>
                <div class="card-strip" [ngClass] = "{'card-strip-grey': projectModule?.projectActivity?.submit_status === 'notsubmitted', 'card-strip-green': projectModule?.projectActivity?.submit_status === 'ontime', 'card-strip-red': projectModule?.projectActivity?.submit_status === 'late'}"></div>
                <div class="card-description mt-4 font-weight-bold">{{projectModule?.projectActivity?.activityname}}</div>
                <div class="d-flex justify-content-between align-item-center mb-3">
                  <div class="date-content">
                    <div class="sub-header">Due on</div>
                    <div class="date-value">{{projectModule?.projectActivity?.activityenddate | date :'dd/MM/yyyy'}}</div>
                  </div>
                  <div class="date-content">
                    <div class="sub-header">Submitted on</div>
                    <div class="date-value" *ngIf="projectModule?.projectActivity?.submitted_date">{{projectModule?.projectActivity?.submitted_date | date :'dd/MM/yyyy'}}</div>
                    <div class="date-value" *ngIf="!projectModule?.projectActivity?.submitted_date">--</div>
                  </div>
                </div>
                <div class="lastRow d-flex justify-content-between align-item-center">
                  <div class="date-content first-content">
                    <div class="sub-header">Status</div>
                    <div class="statusCaps status-value-grey" *ngIf="projectModule?.projectActivity?.submit_status == 'notsubmitted'">
                      {{'Yet to Submit' | translate }}
                    </div>
                    <div class="statusCaps status-value-green" *ngIf="projectModule?.projectActivity?.submit_status == 'ontime'">
                      {{'OnTime' | translate }}
                    </div>
                    <div class="statusCaps status-value-green" *ngIf="projectModule?.projectActivity?.submit_status == 'submitted' || projectModule?.projectActivity?.submit_status == 'graded'">
                      {{'Completed' | translate }}
                    </div>
                    <div class="statusCaps status-value-red" *ngIf="projectModule?.projectActivity?.submit_status == 'late'">
                      {{'Late' | translate }}
                    </div>
                  </div>
                  <div class="date-content score-content">
                    <div class="sub-header">Score</div>
                    <div class="score-value">{{projectModule?.projectActivity?.score_mark ? projectModule?.projectActivity?.score_mark : '--'}}/{{projectModule?.projectActivity?.total_mark}}</div>
                  </div>
                  <div class="icon-content">
                    <em class="lxp-Assignments file-icon"></em>
                  </div>
                </div>
              </mat-card>
            </div>
            <div *ngIf="emptyAssignment">
              <mat-card class="noSessionCard color-yellow-card-status">
                <div class="row mar-t-12 noSessioncardRow">
                  <div class="col-lg-2 col-xl-2 col-md-2 col-sm-2 col-12">
                    <img class="actImg" src="assets/Assignment.svg" alt="assignment">
                  </div>
                  <div class="col-lg-10 col-xl-10 col-md-10 col-sm-10 col-12 noData">
                    <span class="spanTxt"> You have no assignments at the moment!</span>
                  </div>
                </div>
              </mat-card> 
            </div>
          </mat-tab>
          <mat-tab label="Perform"> 
            <div class="card-content d-flex justify-content-between">
              <mat-card *ngFor="let performModule of performContentData" class="card-container">
                <div class="card-topic">
                  {{performModule?.module_id}} > {{performModule?.topic_id}}
                </div>
                <div class="card-strip" [ngClass] = "{'card-strip-grey': performModule?.submit_status === 'notsubmitted', 'card-strip-green': performModule?.submit_status === 'ontime', 'card-strip-red': performModule?.submit_status === 'late'}"></div>
                <div class="card-description mt-4 font-weight-bold">{{performModule?.activityname}}</div>
                <div class="d-flex justify-content-between align-item-center mb-3">
                  <div class="date-content">
                    <div class="sub-header">Due on</div>
                    <div class="date-value">{{performModule?.activityenddate | date :'dd/MM/yyyy'}}</div>
                  </div>
                  <div class="date-content">
                    <div class="sub-header">Submitted on</div>
                    <div class="date-value" *ngIf="performModule?.submitted_date">{{performModule?.submitted_date | date :'dd/MM/yyyy'}}</div>
                    <div class="date-value" *ngIf="!performModule?.submitted_date">--</div>
                  </div>
                </div>
                <div class="lastRow d-flex justify-content-between align-item-center">
                  <div class="date-content first-content">
                    <div class="sub-header">Status</div>
                    <div class="statusCaps status-value-grey" *ngIf="performModule?.submit_status == 'notsubmitted'">
                      {{'Yet to Submit' | translate }}
                    </div>
                    <div class="statusCaps status-value-green" *ngIf="performModule?.submit_status == 'ontime'">
                      {{'OnTime' | translate }}
                    </div>
                    <div class="statusCaps status-value-green" *ngIf="performModule?.submit_status == 'submitted' || performModule?.submit_status == 'graded'">
                      {{'Completed' | translate }}
                    </div>
                    <div class="statusCaps status-value-red" *ngIf="performModule?.submit_status == 'late'">
                      {{'Late' | translate }}
                    </div>
                  </div>
                  <div class="date-content score-content">
                    <div class="sub-header">Score</div>
                    <div class="score-value">{{performModule?.score_mark ? performModule?.score_mark : '--'}}/{{performModule?.total_mark}}</div>
                  </div>
                  <div class="icon-content">
                    <em class="lxp-Assignments file-icon"></em>
                  </div>
                </div>
              </mat-card>
            </div>
            <div *ngIf="emptyAssignment">
              <mat-card class="noSessionCard color-yellow-card-status">
                <div class="row mar-t-12 noSessioncardRow">
                  <div class="col-lg-2 col-xl-2 col-md-2 col-sm-2 col-12">
                    <img class="actImg" src="assets/Assignment.svg" alt="assignment">
                  </div>
                  <div class="col-lg-10 col-xl-10 col-md-10 col-sm-10 col-12 noData">
                    <span class="spanTxt"> You have no assignments at the moment!</span>
                  </div>
                </div>
              </mat-card> 
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>
  </div>
  <div class="right-container">
    <div class="progress-label">Time Spent</div>
    <div [ngStyle]="{'width': '400px'}">
      <canvas baseChart [datasets]="barChartData" [labels]="barChartLabels" [options]="barChartOptions" [plugins]="barChartPlugins" [legend]="barChartLegend" [chartType]="barChartType"></canvas>
    </div>
    <div class="col d-flex mt-3 justify-content-center">
      <div class="col-5 content-border">
        <div class="d-flex left-content">
          <div class="hours">68</div>
          <div class="hrs">hrs</div>
          <div class="week-percentage color-green"><em class="lxp-Up"></em><span class="percentage-text">12%</span></div>
        </div>
        <div class="left-week">This Week</div>
      </div>
      <div class="col-6">
        <div class="d-flex right-content">
          <div class="hours">43</div>
          <div class="hrs">hrs</div>
          <div class="week-percentage color-red"><em class="lxp-Down"></em><span class="percentage-text">8%</span></div>
        </div>
        <div class="right-week">Last Week</div>
      </div>
    </div>
    <div class="d-flex growth">
      <div>You have a </div><div class="text-green">&nbsp;12% learning growth</div>
    </div>
    <div class="col mt-5">
      <div class="col">
        <div class="statistics">Course Statistics</div>
      </div>
      <div class="col d-flex">
        <div class="numbers">87%</div><div class="mr-2 numbers-text">Completeion <br/> Rate</div>
        <div class="numbers">35</div><div class="numbers-text">Questions <br/>Asked</div>
      </div>
      <div class="col d-flex mt-3">
        <div class="font-weight-bold">24&nbsp;</div><div>Students have already completed the course</div>
      </div>
    </div>
  </div>
</div>